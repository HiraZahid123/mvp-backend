import{a as p,u as m,j as e,r as b}from"./app-XFnUlKKE.js";import{A as _}from"./AuthenticatedLayout-Bnk170Fo.js";import{m as h}from"./Header-jgA05Vuc.js";import"./Footer-Dw3LCHd4.js";import"./useTranslation-BA5ts2uw.js";import"./transition-DZ5tXfvk.js";function R({withdrawals:o,stats:l,currentStatus:u}){const[r,g]=p.useState(null),[j,d]=p.useState(!1),[a,f]=p.useState(null),n=m({admin_notes:""}),s=m({admin_notes:""}),c=m({admin_notes:""}),y=[{key:"pending",label:"Pending",count:l.pending,color:"yellow"},{key:"approved",label:"Approved",count:l.approved,color:"green"},{key:"completed",label:"Completed",count:l.completed,color:"blue"},{key:"rejected",label:"Rejected",count:l.rejected,color:"red"},{key:"all",label:"All",count:l.pending+l.approved+l.completed+l.rejected,color:"gray"}],i=(t,x)=>{g(t),f(x),d(!0)},v=()=>{n.post(`/admin/withdrawals/${r.id}/approve`,{onSuccess:()=>{d(!1),n.reset()}})},N=()=>{s.post(`/admin/withdrawals/${r.id}/reject`,{onSuccess:()=>{d(!1),s.reset()}})},k=()=>{c.post(`/admin/withdrawals/${r.id}/complete`,{onSuccess:()=>{d(!1),c.reset()}})};return e.jsxs(_,{header:"Withdrawal Management",maxWidth:"max-w-7xl",showFooter:!0,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-5xl font-black text-oflem-charcoal",children:"Withdrawal Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Review and process withdrawal requests"})]}),e.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:y.map(t=>e.jsxs("button",{onClick:()=>b.get("/admin/withdrawals",{status:t.key}),className:`px-6 py-3 rounded-xl font-bold transition-all whitespace-nowrap ${u===t.key?"bg-oflem-charcoal text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[t.label," (",t.count,")"]},t.key))}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-oflem-charcoal text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Bank Details"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Actions"})]})}),e.jsx("tbody",{children:o.data.map(t=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:t.user.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.user.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-2xl font-black text-oflem-terracotta",children:["CHF ",parseFloat(t.amount).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-bold",children:t.bank_details?.account_holder}),e.jsx("p",{className:"text-gray-600",children:t.bank_details?.iban}),t.bank_details?.bank_name&&e.jsx("p",{className:"text-gray-500",children:t.bank_details.bank_name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${t.status==="pending"?"bg-yellow-100 text-yellow-800":t.status==="approved"?"bg-green-100 text-green-800":t.status==="completed"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:t.status.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(t,"approve"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-bold text-sm transition-all",children:"Approve"}),e.jsx("button",{onClick:()=>i(t,"reject"),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-xl font-bold text-sm transition-all",children:"Reject"})]}),t.status==="approved"&&e.jsx("button",{onClick:()=>i(t,"complete"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-bold text-sm transition-all",children:"Mark Completed"})]})})]},t.id))})]})}),o.links&&e.jsxs("div",{className:"px-6 py-4 border-t flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",o.from," to ",o.to," of ",o.total," results"]}),e.jsx("div",{className:"flex space-x-2",children:o.links.map((t,x)=>e.jsx("button",{onClick:()=>t.url&&b.get(t.url),disabled:!t.url,className:`px-4 py-2 rounded-xl font-bold text-sm transition-all ${t.active?"bg-oflem-terracotta text-white":t.url?"bg-gray-200 hover:bg-gray-300 text-gray-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},x))})]})]})]}),j&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl p-8 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-2xl font-black mb-4",children:[a==="approve"&&"Approve Withdrawal",a==="reject"&&"Reject Withdrawal",a==="complete"&&"Mark as Completed"]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-100 rounded-xl",children:[e.jsx("p",{className:"font-bold",children:r.user.name}),e.jsxs("p",{className:"text-2xl font-black text-oflem-terracotta",children:["CHF ",parseFloat(r.amount).toFixed(2)]})]}),a==="reject"?e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-bold mb-2",children:"Rejection Reason (Required)"}),e.jsx("textarea",{value:s.data.admin_notes,onChange:t=>s.setData("admin_notes",t.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-oflem-terracotta outline-none",rows:"4",placeholder:"Explain why this withdrawal is being rejected..."}),s.errors.admin_notes&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:s.errors.admin_notes})]}):e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-bold mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:a==="approve"?n.data.admin_notes:c.data.admin_notes,onChange:t=>{a==="approve"?n.setData("admin_notes",t.target.value):c.setData("admin_notes",t.target.value)},className:"w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-oflem-terracotta outline-none",rows:"3",placeholder:"Add any notes..."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{d(!1),n.reset(),s.reset(),c.reset()},className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-3 rounded-xl font-bold transition-all",children:"Cancel"}),e.jsxs("button",{onClick:()=>{a==="approve"?v():a==="reject"?N():k()},disabled:a==="approve"&&n.processing||a==="reject"&&(s.processing||!s.data.admin_notes)||a==="complete"&&c.processing,className:`flex-1 px-6 py-3 rounded-xl font-bold transition-all ${a==="approve"?"bg-green-600 hover:bg-green-700":a==="reject"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white disabled:opacity-50`,children:[a==="approve"&&"Approve",a==="reject"&&"Reject",a==="complete"&&"Mark Completed"]})]})]})})]})}export{R as default};
