import{b as S,r as c,u as D,j as e,H as E,c as L}from"./app-BjoLlwmr.js";import{u as O}from"./useTranslation-B-9Pm2rs.js";import{A as P}from"./AuthSplitLayout-CiD52p-2.js";import{P as B}from"./PrimaryButton-DcCGJyQh.js";import{I as C}from"./InputError-CRYwEMEu.js";import{B as R}from"./BackButton-CQfu3t8U.js";import"./LanguageSwitcher-BUk-ohyk.js";function q(){const{t:a}=O(),{email:b=""}=S().props,[r,m]=c.useState(30),[l,d]=c.useState(!1),[i,x]=c.useState(["","","","","",""]),{data:y,setData:u,post:j,processing:p,errors:f,reset:$}=D({code:""});c.useEffect(()=>{if(r>0){const s=setInterval(()=>m(t=>t-1),1e3);return()=>clearInterval(s)}else r===0&&d(!0)},[r]);const g=s=>{const t=Math.floor(s/60),n=s%60;return`${t}:${n.toString().padStart(2,"0")}`},N=()=>{m(30),d(!1),L.post(route("login.verify-otp.resend")).catch(()=>{})},v=s=>{s.preventDefault();const t=s.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(!t)return;const n=[...i];for(let o=0;o<t.length;o++)n[o]=t[o];x(n),u("code",n.join(""));const I=Math.min(t.length,5),h=document.getElementById(`otp-${I}`);h&&h.focus()},k=(s,t)=>{if(isNaN(s))return;const n=[...i];n[t]=s,x(n),u("code",n.join("")),s&&t<5&&document.getElementById(`otp-${t+1}`).focus()},w=s=>{s.preventDefault(),j(route("login.verify-otp.store"))};return e.jsxs(P,{heroImage:"/otp-verify-code.svg",heroHeading:a("Security First"),heroSubtext:a("Enter the 6-digit code sent to your email to securely log in."),bgAccentClass:"bg-cream-accent",children:[e.jsx(E,{title:a("Verify Login")}),e.jsxs("div",{className:"mb-8 lg:mb-10 text-center lg:text-left relative",children:[e.jsx(R,{href:route("login"),className:"absolute -top-12 left-0"}),e.jsx("h2",{className:"text-lg font-medium text-primary-black mb-1",children:a("Oflem")}),e.jsx("h1",{className:"text-[32px] lg:text-[40px] font-black text-primary-black tracking-tight mb-2",children:a("Verify Login")}),e.jsx("p",{className:"text-gray-muted text-sm font-medium",children:a("Enter the code received by email.")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-primary-black font-black text-center",children:b})}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-black text-primary-black block text-center",children:a("One-time password")}),e.jsx("div",{className:"flex justify-between gap-1 sm:gap-2 max-w-sm mx-auto",children:i.map((s,t)=>e.jsx("input",{id:`otp-${t}`,type:"text",maxLength:"1",value:s,onChange:n=>k(n.target.value,t),onPaste:v,className:"w-10 h-10 sm:w-12 sm:h-12 text-center text-xl font-black bg-input-bg border border-gray-border focus:ring-1 focus:ring-gold-accent focus:border-gold-accent rounded-full outline-none transition-all"},t))})]}),e.jsx(C,{message:f.code||f.general,className:"text-center ml-0"}),e.jsx(B,{type:"submit",disabled:p||y.code.length!==6,processing:p,className:"w-full",children:a("Log In")}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"text-gray-muted",children:a("Didn't receive code?")}),e.jsx("button",{type:"button",onClick:N,disabled:!l,className:`font-black transition-colors ${l?"text-primary-black underline hover:text-gold-accent":"text-gray-400 cursor-not-allowed"}`,children:l?a("Resend Code"):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"hidden lg:inline",children:[a("Resend in")," ",g(r)]}),e.jsxs("span",{className:"lg:hidden",children:[a("Resend in")," ",g(r)]})]})})]})})})]})]})]})}export{q as default};
