import{a as i,u as b,j as t,H as D,r as w}from"./app-DqP4OVY8.js";import{A as I}from"./AuthSplitLayout-CZ6sSYzi.js";import{I as R}from"./InputError-CS9Vfv5r.js";import{P as $}from"./PrimaryButton-BfGmvQh3.js";import{u as B}from"./useTranslation-C26tRKoX.js";function K({email:c}){const[r,u]=i.useState(["","","","","",""]),[l,d]=i.useState(30),[j,m]=i.useState(!1),{t:n}=B(),{data:P,setData:x,post:T,processing:h,errors:y}=b({email:c,code:""}),{post:N,processing:p}=b({email:c});i.useEffect(()=>{if(l===0){m(!0);return}const s=setTimeout(()=>{d(l-1)},1e3);return()=>clearTimeout(s)},[l]);const v=(s,e)=>{if(!/^\d*$/.test(e))return;const o=[...r];o[s]=e.slice(-1),u(o),e&&s<5&&document.getElementById(`code-${s+1}`)?.focus();const a=o.join("");a.length===6&&(x("code",a),f(a))},C=(s,e)=>{e.key==="Backspace"&&!r[s]&&s>0&&document.getElementById(`code-${s-1}`)?.focus()},E=s=>{s.preventDefault();const e=s.clipboardData.getData("text").slice(0,6);if(!/^\d+$/.test(e))return;const o=[...r];if(e.split("").forEach((a,g)=>{g<6&&(o[g]=a)}),u(o),e.length===6)x("code",e),f(e);else{const a=e.length;a<6&&document.getElementById(`code-${a}`)?.focus()}},f=(s=null)=>{const e=s||r.join("");e.length===6&&w.post(route("auth.verify-email-code.store"),{email:c,code:e},{preserveState:!1,onSuccess:()=>{},onError:o=>{console.error("Verification failed:",o),o.code&&(m(!0),d(0))}})},S=()=>{N(route("auth.verify-email-code.resend"),{onSuccess:()=>{d(30),m(!1)}})};return t.jsxs(I,{heroImage:"/images/illustrations/verify-email.svg",bgAccentClass:"bg-cream-accent",children:[t.jsx(D,{title:n("Verify Email")}),t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-[32px] lg:text-[40px] font-serif font-bold text-oflem-charcoal tracking-tight mb-3 leading-tight",children:n("Verify your email")}),t.jsxs("p",{className:"text-gray-muted text-base font-medium",children:[n("We've sent a code to "),t.jsx("span",{className:"font-bold text-oflem-charcoal",children:c})]})]}),t.jsxs("form",{onSubmit:s=>{s.preventDefault(),f()},className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-center gap-2 lg:gap-3",children:r.map((s,e)=>t.jsx("input",{id:`code-${e}`,type:"text",inputMode:"numeric",maxLength:1,value:s,onChange:o=>v(e,o.target.value),onKeyDown:o=>C(e,o),onPaste:E,className:`\r
                                    w-12 h-14 lg:w-14 lg:h-16\r
                                    text-center text-2xl font-bold\r
                                    bg-input-bg border-2 border-gray-border/50\r
                                    rounded-[16px]\r
                                    text-oflem-charcoal\r
                                    focus:outline-none focus:ring-2 focus:ring-oflem-terracotta/30 focus:border-oflem-terracotta\r
                                    transition-all duration-200\r
                                `},e))}),t.jsx(R,{message:y.code,className:"mt-3 text-center"})]}),t.jsx("div",{className:"text-center",children:j?t.jsx("button",{type:"button",onClick:S,disabled:p,className:"text-sm font-bold text-oflem-terracotta hover:underline disabled:opacity-50",children:n(p?"Sending...":"Resend code")}):t.jsxs("p",{className:"text-sm text-gray-muted font-medium",children:[n("Resend code in "),t.jsxs("span",{className:"font-bold text-oflem-charcoal",children:[l,"s"]})]})}),t.jsx($,{className:"w-full",disabled:h||r.join("").length!==6,processing:h,children:n("Verify")})]}),t.jsx("div",{className:"elegant-capsule mt-8",children:t.jsxs("p",{className:"text-xs text-oflem-charcoal font-medium text-center",children:[n("The code will expire in "),t.jsx("span",{className:"font-bold text-oflem-terracotta",children:n("10 minutes")})]})})]})}export{K as default};
