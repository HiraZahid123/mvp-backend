import{b as M,r as c,u as B,j as e,H as E,c as I}from"./app-DAKRhxGg.js";import{u as P}from"./useTranslation-DmO1C7R8.js";import{A}from"./AuthSplitLayout-DNPj9i1X.js";import{P as k}from"./PrimaryButton-nFK9WZgx.js";import{I as F}from"./InputError-BG2z5Dqp.js";import{B as R}from"./BackButton-B7lHMLuq.js";import"./LanguageSwitcher-BfxjJ__5.js";function K(){const{t}=P(),{email:h="",phone:u=""}=M().props,[l,g]=c.useState(30),[T,p]=c.useState(!1),[a,i]=c.useState(!1),[o,m]=c.useState(null),[x,f]=c.useState(["","","","","",""]),{data:w,setData:b,post:C,processing:j,errors:S,reset:V}=B({code:""});c.useEffect(()=>{if(a&&l>0){const s=setInterval(()=>g(n=>n-1),1e3);return()=>clearInterval(s)}else l===0&&p(!0)},[a,l]);const y=s=>{const n=Math.floor(s/60),r=s%60;return`${n}:${r.toString().padStart(2,"0")}`},v=s=>{m(s),i(!0),g(30),p(!1),I.post(route("auth.verify-otp.send"),{method:s}).catch(()=>i(!1))},O=s=>{s.preventDefault();const n=s.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(!n)return;const r=[...x];for(let d=0;d<n.length;d++)r[d]=n[d];f(r),b("code",r.join(""));const L=Math.min(n.length,5),N=document.getElementById(`otp-${L}`);N&&N.focus()},$=(s,n)=>{if(isNaN(s))return;const r=[...x];r[n]=s,f(r),b("code",r.join("")),s&&n<5&&document.getElementById(`otp-${n+1}`).focus()},D=s=>{s.preventDefault(),C(route("auth.verify-otp"))};return e.jsxs(A,{heroImage:a?"/otp-verify-code.svg":"/otp-verification-slection.svg",heroHeading:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden lg:inline",children:t("Almost done")}),e.jsx("span",{className:"lg:hidden",children:t("Almost done")})]}):t("One small code to go"),heroSubtext:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden lg:inline",children:t("6 digits, and Oflem takes over.")}),e.jsx("span",{className:"lg:hidden",children:t("6 digits, and Oflem takes over.")})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden lg:inline",children:t("We'll send you a code by email to continue.")}),e.jsx("span",{className:"lg:hidden",children:t("We'll send you a code by email to continue.")})]}),bgAccentClass:"bg-cream-accent",children:[e.jsx(E,{title:t("Verify OTP")}),e.jsxs("div",{className:"mb-8 lg:mb-10 text-center lg:text-left relative",children:[e.jsx(R,{href:a?"#":route("login"),onClick:a?s=>{s.preventDefault(),i(!1)}:void 0,className:"absolute -top-12 left-0"}),e.jsx("h2",{className:"text-lg font-medium text-primary-black mb-1",children:t("Oflem")}),e.jsx("h1",{className:"text-[32px] lg:text-[40px] font-black text-primary-black tracking-tight mb-2",children:t(a?"Almost done":"One small code to go")}),e.jsx("p",{className:"text-gray-muted text-sm font-medium",children:t(a?"Enter the code received by email.":"We'll send you a code by email to continue.")})]}),e.jsx("div",{className:"space-y-6",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-primary-black font-black text-center",children:o==="email"?h:u})}),e.jsxs("form",{onSubmit:D,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-black text-primary-black block text-center",children:t("Enter the code received by email.")}),e.jsx("div",{className:"flex justify-between gap-1 sm:gap-2 max-w-sm mx-auto",children:x.map((s,n)=>e.jsx("input",{id:`otp-${n}`,type:"text",maxLength:"1",value:s,onChange:r=>$(r.target.value,n),onPaste:O,className:"w-10 h-10 sm:w-12 sm:h-12 text-center text-xl font-black bg-input-bg border border-gray-border focus:ring-1 focus:ring-gold-accent focus:border-gold-accent rounded-full outline-none transition-all"},n))})]}),e.jsx(F,{message:S.code,className:"text-center ml-0"}),e.jsx(k,{type:"submit",disabled:j||w.code.length!==6,processing:j,className:"w-full",children:t("Verify Code")}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"text-gray-muted",children:t("Didn't receive code?")}),e.jsx("button",{type:"button",onClick:()=>v(o),disabled:l>0,className:`font-black transition-colors ${l>0?"text-gray-400 cursor-not-allowed":"text-primary-black underline hover:text-gold-accent"}`,children:l>0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"hidden lg:inline",children:[t("Resend Code in")," ",y(l)]}),e.jsxs("span",{className:"lg:hidden",children:[t("Resend in")," ",y(l)]})]}):t("Resend Code")})]})}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"text-xs text-gray-muted font-black hover:text-primary-black transition-colors",children:t("Change Method")})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{onClick:()=>m("email"),className:`p-5 bg-white border rounded-[24px] cursor-pointer transition-all flex items-center justify-between group ${o==="email"?"border-gold-accent ring-1 ring-gold-accent":"border-gray-border hover:border-gold-accent"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cream-accent flex items-center justify-center text-gold-accent transition-colors group-hover:bg-gold-accent group-hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-primary-black",children:t("Send code to email :")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:h})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${o==="email"?"border-gold-accent":"border-gray-border group-hover:border-gold-accent"}`,children:e.jsx("div",{className:`w-3 h-3 rounded-full transition-colors ${o==="email"?"bg-gold-accent":"bg-transparent"}`})})]}),e.jsxs("div",{onClick:()=>m("phone"),className:`p-5 bg-white border rounded-[24px] cursor-pointer transition-all flex items-center justify-between group ${o==="phone"?"border-gold-accent ring-1 ring-gold-accent":"border-gray-border hover:border-gold-accent"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cream-accent flex items-center justify-center text-gold-accent transition-colors group-hover:bg-gold-accent group-hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-primary-black",children:t("Send code to phone number :")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:u})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${o==="phone"?"border-gold-accent":"border-gray-border group-hover:border-gold-accent"}`,children:e.jsx("div",{className:`w-3 h-3 rounded-full transition-colors ${o==="phone"?"bg-gold-accent":"bg-transparent"}`})})]}),e.jsx(k,{onClick:()=>v(o),disabled:!o,processing:!1,className:"w-full mt-6",children:t("Verify Account")})]})})]})}export{K as default};
