import{a as D,r as o,u as L,j as e,H as O,c as E}from"./app-CSj48lUn.js";import{u as P}from"./useTranslation-CLv7M1vF.js";import{A as S}from"./AuthSplitLayout-BOFyoxBR.js";import{P as B}from"./PrimaryButton-DmQoBXta.js";import{I as C}from"./InputError-CpM9uXzD.js";import{B as R}from"./BackButton-JUZXdW4u.js";import"./LanguageSwitcher-Cs8TVv_x.js";function q(){const{t:n}=P(),{email:b=""}=D().props,[r,m]=o.useState(30),[l,d]=o.useState(!1),[i,x]=o.useState(["","","","","",""]),{data:j,setData:p,post:y,processing:u,errors:f,reset:$}=L({code:""});o.useEffect(()=>{if(r>0){const s=setInterval(()=>m(t=>t-1),1e3);return()=>clearInterval(s)}else r===0&&d(!0)},[r]);const g=s=>{const t=Math.floor(s/60),a=s%60;return`${t}:${a.toString().padStart(2,"0")}`},N=()=>{m(30),d(!1),E.post(route("login.verify-otp.resend")).catch(()=>{})},v=s=>{s.preventDefault();const t=s.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(!t)return;const a=[...i];for(let c=0;c<t.length;c++)a[c]=t[c];x(a),p("code",a.join(""));const I=Math.min(t.length,5),h=document.getElementById(`otp-${I}`);h&&h.focus()},k=(s,t)=>{if(isNaN(s))return;const a=[...i];a[t]=s,x(a),p("code",a.join("")),s&&t<5&&document.getElementById(`otp-${t+1}`).focus()},w=s=>{s.preventDefault(),y(route("login.verify-otp.store"))};return e.jsxs(S,{heroImage:"/otp-verify-code.svg",bgAccentClass:"bg-cream-accent",children:[e.jsx(O,{title:n("Verify Login")}),e.jsxs("div",{className:"mb-8 lg:mb-10 text-center lg:text-left relative",children:[e.jsx(R,{href:route("login"),className:"absolute -top-12 left-0"}),e.jsx("h2",{className:"text-lg font-medium text-primary-black mb-1",children:n("Oflem")}),e.jsx("h1",{className:"text-[32px] lg:text-[40px] font-black text-primary-black tracking-tight mb-2",children:n("Verify Login")}),e.jsx("p",{className:"text-gray-muted text-sm font-medium",children:n("Enter the code received by email.")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-primary-black font-black text-center",children:b})}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-black text-primary-black block text-center",children:n("One-time password")}),e.jsx("div",{className:"flex justify-between gap-1 sm:gap-2 max-w-sm mx-auto",children:i.map((s,t)=>e.jsx("input",{id:`otp-${t}`,type:"text",maxLength:"1",value:s,onChange:a=>k(a.target.value,t),onPaste:v,className:"w-10 h-10 sm:w-12 sm:h-12 text-center text-xl font-black bg-input-bg border border-gray-border focus:ring-1 focus:ring-gold-accent focus:border-gold-accent rounded-full outline-none transition-all"},t))})]}),e.jsx(C,{message:f.code||f.general,className:"text-center ml-0"}),e.jsx(B,{type:"submit",disabled:u||j.code.length!==6,processing:u,className:"w-full",children:n("Log In")}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"text-gray-muted",children:n("Didn't receive code?")}),e.jsx("button",{type:"button",onClick:N,disabled:!l,className:`font-black transition-colors ${l?"text-primary-black underline hover:text-gold-accent":"text-gray-400 cursor-not-allowed"}`,children:l?n("Resend Code"):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"hidden lg:inline",children:[n("Resend in")," ",g(r)]}),e.jsxs("span",{className:"lg:hidden",children:[n("Resend in")," ",g(r)]})]})})]})})})]})]})]})}export{q as default};
