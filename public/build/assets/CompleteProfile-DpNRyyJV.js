import{a as M,r as l,u as D,j as e,H}from"./app-3ui6Zh4V.js";import{u as T,G as U,M as B,C as q}from"./esm-BO4OLmwt.js";import{u as G}from"./useTranslation-C36Wy86N.js";import{A as W}from"./AuthSplitLayout-CmlCreZT.js";import{T as g}from"./TextInput-CneGO9cV.js";import{I as d}from"./InputLabel-uIPqz4u5.js";import{P as Y}from"./PrimaryButton-Ft17DT6_.js";import{I as h}from"./InputError-dyO9oETY.js";import{B as K}from"./BackButton-C0dnAdSe.js";import"./LanguageSwitcher-Ct-b8yFw.js";const J=["places"];function le(){const{user:f}=M().props,{t:a}=G(),m=l.useRef(null),[k,N]=l.useState(f?.avatar||"/images/avatars/default-avatar.svg"),[b,Q]=l.useState({lat:40.7128,lng:-74.006}),[n,C]=l.useState(null),[p,_]=l.useState(10),{isLoaded:w,loadError:L}=T({googleMapsApiKey:"AIzaSyAaeyO3ffYCdUpAHU0kQx3TsHGhlbaIgkA",libraries:J}),{data:u,setData:s,post:z,processing:I,errors:r}=D({name:f?.name||"",zip_code:"",location_address:"",location_lat:null,location_lng:null,discovery_radius_km:25,avatar:null}),A=t=>{const o=t.target.files[0];o&&(s("avatar",o),N(URL.createObjectURL(o)))},j=l.useCallback(t=>{const o=t.latLng.lat(),c=t.latLng.lng();C({lat:o,lng:c}),s(y=>({...y,location_lat:o,location_lng:c})),window.google&&window.google.maps&&new window.google.maps.Geocoder().geocode({location:{lat:o,lng:c}},(x,O)=>{if(O==="OK"&&x[0]){const R=x[0].address_components;let v="";for(const i of R)if(i.types.includes("postal_code")){v=i.long_name;break}s(i=>({...i,location_lat:o,location_lng:c,location_address:x[0].formatted_address,zip_code:v||i.zip_code}))}})},[s]),P=t=>{_(t),s("discovery_radius_km",t)},S=t=>{t.preventDefault(),z(route("auth.complete-profile"))},E={width:"100%",height:"240px",borderRadius:"1.5rem"},F={strokeColor:"#D4AF37",strokeOpacity:.8,strokeWeight:2,fillColor:"#D4AF37",fillOpacity:.1,clickable:!1,radius:p*1e3,center:n||b};return e.jsxs(W,{heroImage:"/images/illustrations/basic-profile.svg",heroHeading:a("Welcome"),heroSubtext:a("Oflem makes life easy by connecting people to hire help or earn money by completing tasks quickly and reliably."),bgAccentClass:"bg-cream-accent",children:[e.jsx(H,{title:a("Complete Profile")}),e.jsxs("div",{className:"mb-8 lg:mb-10 text-center lg:text-left relative",children:[e.jsx(K,{href:route("auth.select-role"),className:"absolute -top-12 left-0"}),e.jsx("h2",{className:"text-lg font-medium text-primary-black mb-1",children:a("Promise, this is the last thing")}),e.jsx("h1",{className:"text-[32px] lg:text-[40px] font-black text-primary-black tracking-tight mb-2",children:a("Just your area. After that, Oflem handles it.")}),e.jsxs("div",{className:"flex flex-col items-center w-full mt-6 mb-2",children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-100 border-2 border-white shadow-sm overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:k,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsx("button",{type:"button",onClick:()=>m.current.click(),className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-md flex items-center justify-center border border-gray-border overflow-hidden hover:bg-gold-accent transition-colors group",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("input",{type:"file",ref:m,className:"hidden",accept:"image/*",onChange:A})]}),e.jsx("button",{type:"button",onClick:()=>m.current.click(),className:"text-xs font-black text-gray-muted hover:text-primary-black transition-colors",children:a("Edit Profile")})]})]}),e.jsxs("form",{onSubmit:S,className:"space-y-5 pb-8",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(d,{htmlFor:"name",value:a("Full Name")}),e.jsx(g,{id:"name",type:"text",value:u.name,onChange:t=>s("name",t.target.value),placeholder:a("Enter Your Name"),autoComplete:"name",required:!0}),e.jsx(h,{message:r.name})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(d,{htmlFor:"zip_code",value:a("ZIP Code")}),e.jsx(g,{id:"zip_code",type:"text",value:u.zip_code,onChange:t=>s("zip_code",t.target.value),placeholder:a("e.g. 10001"),required:!0}),e.jsx(h,{message:r.zip_code})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(d,{htmlFor:"location_address",value:a("Location")}),e.jsx(g,{id:"location_address",type:"text",value:u.location_address,onChange:t=>s("location_address",t.target.value),placeholder:a("New York City, USA"),required:!0}),e.jsx(h,{message:r.location_address})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center px-4",children:[e.jsxs("div",{children:[e.jsx(d,{value:a("Radius"),className:"ml-0"}),e.jsx("p",{className:"text-[10px] text-gray-muted font-bold",children:a("Pick a radius to make tasking easier")})]}),e.jsxs("span",{className:"text-sm font-black text-primary-black",children:[p," km"]})]}),e.jsx("div",{className:"px-4",children:e.jsx("input",{type:"range",min:"1",max:"50",value:p,onChange:t=>P(parseInt(t.target.value)),className:"w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-gold-accent"})}),e.jsx("div",{className:"rounded-[24px] overflow-hidden border border-gray-border relative mx-4",children:w?e.jsx(U,{mapContainerStyle:E,center:n||b,zoom:11,onClick:j,options:{disableDefaultUI:!0,zoomControl:!1,styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f5f5f5"}]}]},children:n&&e.jsxs(e.Fragment,{children:[e.jsx(B,{position:n,draggable:!0,onDragEnd:j}),e.jsx(q,{center:n,options:F})]})}):e.jsx("div",{className:"w-full h-[240px] bg-gray-100 flex items-center justify-center italic text-gray-400",children:L?"Error loading maps":"Loading map..."})})]}),r.general&&e.jsx("p",{className:"text-red-500 text-sm font-bold text-center",children:r.general}),r.avatar&&e.jsx("p",{className:"text-red-500 text-sm font-bold text-center",children:r.avatar}),e.jsx("div",{className:"pt-4",children:e.jsx(Y,{className:"w-full",disabled:I,children:a("Complete Profile")})})]})]})}export{le as default};
