import{j as e,H as p,L as u,r as f}from"./app-DPEtfABQ.js";import{u as g}from"./useTranslation-CHcCtFEc.js";import{A as b}from"./AuthenticatedLayout-CMKzBOMo.js";import{D as d}from"./dollar-sign-Dxpx0SAy.js";import{c as n}from"./createLucideIcon-BOzI6qxR.js";import{C as o}from"./circle-check-big-DHyyh244.js";import{C as j}from"./circle-x-MzkSxz6N.js";import"./transition-BwDj_57U.js";import"./LanguageSwitcher-CcbLJo8v.js";const N=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],y=n("circle-alert",N);const k=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],x=n("refresh-cw",k);const w=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],v=n("trending-up",w);function F({payments:c,stats:r}){const{t:s}=g(),i=t=>{const a=prompt(s("Refund reason:"));a&&f.post(route("admin.payments.refund",t),{reason:a},{preserveScroll:!0,onSuccess:()=>alert(s("Refund processed successfully"))})},m=t=>{const a={pending:{bg:"bg-yellow-100",text:"text-yellow-700",icon:y},held:{bg:"bg-blue-100",text:"text-blue-700",icon:d},captured:{bg:"bg-green-100",text:"text-green-700",icon:o},refunded:{bg:"bg-red-100",text:"text-red-700",icon:j}},l=a[t]||a.pending,h=l.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-black uppercase ${l.bg} ${l.text}`,children:[e.jsx(h,{className:"w-3 h-3"}),s(t)]})};return e.jsxs(b,{children:[e.jsx(p,{title:s("Payment Management")}),e.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-6",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-4xl font-black text-oflem-charcoal mb-2",children:s("Payment Management")}),e.jsx("p",{className:"text-gray-muted font-bold",children:s("Monitor transactions and process refunds")})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(d,{className:"w-5 h-5 text-oflem-terracotta"}),e.jsx("p",{className:"text-xs font-black uppercase text-gray-muted",children:"Total Revenue"})]}),e.jsxs("p",{className:"text-3xl font-black text-oflem-charcoal",children:["CHF ",r?.total_revenue?.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(v,{className:"w-5 h-5 text-green-500"}),e.jsx("p",{className:"text-xs font-black uppercase text-gray-muted",children:"Commission"})]}),e.jsxs("p",{className:"text-3xl font-black text-oflem-charcoal",children:["CHF ",r?.total_commission?.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(o,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"text-xs font-black uppercase text-gray-muted",children:"Held"})]}),e.jsx("p",{className:"text-3xl font-black text-oflem-charcoal",children:r?.held_count||"0"})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(x,{className:"w-5 h-5 text-red-500"}),e.jsx("p",{className:"text-xs font-black uppercase text-gray-muted",children:"Refunded"})]}),e.jsx("p",{className:"text-3xl font-black text-oflem-charcoal",children:r?.refunded_count||"0"})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-oflem-cream border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Transaction"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Mission"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-black uppercase tracking-wider text-gray-muted",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:c?.data?.map(t=>e.jsxs("tr",{className:"hover:bg-oflem-cream/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-black text-oflem-charcoal",children:["#",t.id]}),e.jsx("p",{className:"text-xs text-gray-muted font-medium",children:t.payment_intent_id})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(u,{href:route("admin.missions.show",t.mission_id),className:"font-bold text-oflem-terracotta hover:underline",children:["Mission #",t.mission_id]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-black text-oflem-charcoal",children:["CHF ",t.amount]}),e.jsxs("p",{className:"text-xs text-gray-muted",children:["Commission: CHF ",t.platform_commission]})]})}),e.jsx("td",{className:"px-6 py-4",children:m(t.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm font-medium text-gray-600",children:new Date(t.created_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 text-right",children:t.status==="held"||t.status==="captured"?e.jsxs("button",{onClick:()=>i(t.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-xl font-bold text-sm hover:bg-red-200 transition-colors",children:[e.jsx(x,{className:"w-4 h-4 inline mr-1"}),"Refund"]}):e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"N/A"})})]},t.id))})]})})}),(!c?.data||c.data.length===0)&&e.jsxs("div",{className:"bg-white rounded-3xl p-20 text-center shadow-sm border border-gray-100 mt-8",children:[e.jsx(d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-black text-oflem-charcoal mb-4",children:s("No payments yet")}),e.jsx("p",{className:"text-gray-muted font-medium",children:s("Payments will appear here once missions are completed")})]})]})]})}export{F as default};
