import{a as j,u as p,j as e,H as y,L as N}from"./app-Be0iEcFh.js";import{A as k}from"./AuthenticatedLayout-B3Y457RM.js";import{u as v}from"./useTranslation-DrEBiptJ.js";import{I as i}from"./InputLabel-Rgpz2q6s.js";import{T as n}from"./TextInput-ja_45eS9.js";import{I as m}from"./InputError-DzROeIIs.js";import{m as c}from"./Header-D61nqR7k.js";import"./Footer-_6-fecJP.js";import"./transition-DKONF1vP.js";function M({balance:w,availableBalance:l,pendingWithdrawal:x,totalWithdrawn:h,transactions:r,pendingWithdrawals:u}){const{t:a}=v(),[b,o]=j.useState(!1),s=p({amount:"",bank_details:{account_holder:"",iban:"",bank_name:""}}),f=t=>{t.preventDefault(),s.post(route("wallet.withdraw"),{onSuccess:()=>{o(!1),s.reset()}})},g=t=>{confirm(a("Are you sure you want to cancel this withdrawal request?"))&&p().delete(route("wallet.cancel",t))};return e.jsxs(k,{header:a("My Wallet"),maxWidth:"max-w-4xl",showFooter:!0,children:[e.jsx(y,{title:a("My Wallet")}),e.jsx("div",{className:"mb-12",children:e.jsx("p",{className:"text-gray-muted font-bold",children:a("Track your earnings and manage your balance.")})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-12",children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"md:col-span-2 bg-oflem-charcoal rounded-[40px] p-10 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-black uppercase tracking-[0.2em] opacity-60 mb-4",children:a("Available Balance")}),e.jsxs("h2",{className:"text-6xl font-black mb-2",children:[e.jsx("span",{className:"text-oflem-terracotta mr-2",children:"CHF"}),parseFloat(l).toFixed(2)]}),x>0&&e.jsxs("p",{className:"text-sm opacity-75 mb-8",children:[a("Pending Withdrawal"),": CHF ",parseFloat(x).toFixed(2)]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{onClick:()=>o(!0),disabled:l<10,className:"px-8 py-3 bg-white text-oflem-charcoal font-black rounded-full hover:bg-oflem-cream transition-all text-sm shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:a("Withdraw Funds")})}),l<10&&e.jsx("p",{className:"text-xs opacity-60 mt-4",children:a("Minimum withdrawal amount is CHF 10.00")})]}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-oflem-terracotta/20 rounded-full -mr-20 -mt-20 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-blue-500/10 rounded-full -ml-10 -mb-10 blur-2xl"})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-[40px] p-10 border border-gray-border shadow-sm flex flex-col justify-center",children:[e.jsx("p",{className:"text-xs font-black text-gray-muted uppercase tracking-widest mb-1",children:a("Total Earned")}),e.jsxs("p",{className:"text-2xl font-black text-oflem-charcoal mb-6",children:["CHF ",r.reduce((t,d)=>t+parseFloat(d.performer_amount),0).toFixed(2)]}),e.jsx("p",{className:"text-xs font-black text-gray-muted uppercase tracking-widest mb-1",children:a("Withdrawn")}),e.jsxs("p",{className:"text-2xl font-black text-oflem-charcoal mb-6",children:["CHF ",parseFloat(h).toFixed(2)]}),e.jsx("p",{className:"text-xs font-black text-gray-muted uppercase tracking-widest mb-1",children:a("Missions")}),e.jsx("p",{className:"text-2xl font-black text-oflem-charcoal",children:r.length})]})]}),u.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("h3",{className:"text-xl font-black text-oflem-charcoal flex items-center gap-3 mb-6",children:[e.jsx("span",{children:"â³"})," ",a("Pending Withdrawals")]}),e.jsx("div",{className:"bg-white rounded-[40px] border border-gray-border overflow-hidden shadow-sm divide-y divide-gray-border",children:u.map(t=>e.jsxs("div",{className:"p-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-black text-oflem-charcoal mb-1",children:["CHF ",parseFloat(t.amount).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-muted font-bold",children:[a("Requested on")," ",new Date(t.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-4 py-2 text-xs font-black uppercase tracking-widest rounded-full ${t.status==="pending"?"bg-yellow-100 text-yellow-700":t.status==="approved"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:a(t.status)}),t.status==="pending"&&e.jsx("button",{onClick:()=>g(t.id),className:"text-xs font-black text-red-600 hover:text-red-800",children:a("Cancel")})]})]},t.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-black text-oflem-charcoal flex items-center gap-3",children:[e.jsx("span",{children:"ðŸ•’"})," ",a("Transaction History")]}),e.jsx("div",{className:"bg-white rounded-[40px] border border-gray-border overflow-hidden shadow-sm",children:r.length>0?e.jsx("div",{className:"divide-y divide-gray-border",children:r.map((t,d)=>e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},className:"p-8 flex items-center justify-between hover:bg-oflem-cream/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-14 h-14 bg-green-50 text-green-600 rounded-2xl flex items-center justify-center text-xl shadow-sm",children:"ðŸ“¥"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-oflem-charcoal text-lg mb-1",children:t.mission.title}),e.jsxs("p",{className:"text-xs font-bold text-gray-muted uppercase tracking-widest",children:[t.captured_at?new Date(t.captured_at).toLocaleDateString():a("Processing")," â€¢ ",a("Mission ID"),": #",t.mission_id]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xl font-black text-green-600 mb-1",children:["+ CHF ",parseFloat(t.performer_amount).toFixed(2)]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-[10px] font-black uppercase tracking-widest rounded-full",children:a("Captured")})]})]},t.id))}):e.jsxs("div",{className:"p-20 text-center",children:[e.jsx("div",{className:"text-6xl mb-6",children:"ðŸœï¸"}),e.jsx("h4",{className:"text-xl font-black text-oflem-charcoal mb-2",children:a("No transactions yet")}),e.jsx("p",{className:"text-gray-muted font-bold max-w-sm mx-auto",children:a("Complete your first mission to start building your balance!")}),e.jsx(N,{href:route("providers.index"),className:"inline-block mt-8 px-8 py-3 bg-oflem-terracotta text-white font-black rounded-full hover:opacity-90 transition-all text-sm",children:a("Find Helpers")})]})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-[40px] p-10 max-w-md w-full shadow-2xl",children:[e.jsx("h2",{className:"text-2xl font-black text-oflem-charcoal mb-6",children:a("Request Withdrawal")}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"amount",value:a("Amount (CHF)"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(n,{id:"amount",type:"number",step:"0.01",min:"10",max:l,className:"w-full",placeholder:"0.00",value:s.data.amount,onChange:t=>s.setData("amount",t.target.value),required:!0}),e.jsx(m,{message:s.errors.amount,className:"mt-2"}),e.jsxs("p",{className:"text-xs text-gray-muted mt-2",children:[a("Available"),": CHF ",parseFloat(l).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"account_holder",value:a("Account Holder Name"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(n,{id:"account_holder",type:"text",className:"w-full",value:s.data.bank_details.account_holder,onChange:t=>s.setData("bank_details",{...s.data.bank_details,account_holder:t.target.value}),required:!0}),e.jsx(m,{message:s.errors["bank_details.account_holder"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"iban",value:a("IBAN"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(n,{id:"iban",type:"text",className:"w-full",placeholder:"CH93 0076 2011 6238 5295 7",value:s.data.bank_details.iban,onChange:t=>s.setData("bank_details",{...s.data.bank_details,iban:t.target.value}),required:!0}),e.jsx(m,{message:s.errors["bank_details.iban"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"bank_name",value:a("Bank Name (Optional)"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(n,{id:"bank_name",type:"text",className:"w-full",value:s.data.bank_details.bank_name,onChange:t=>s.setData("bank_details",{...s.data.bank_details,bank_name:t.target.value})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 py-3 bg-gray-200 text-oflem-charcoal font-black rounded-full hover:bg-gray-300 transition-all",children:a("Cancel")}),e.jsx("button",{type:"submit",disabled:s.processing,className:"flex-1 py-3 bg-oflem-terracotta text-white font-black rounded-full hover:opacity-90 transition-all disabled:opacity-50",children:a("Submit Request")})]})]})]})})]})}export{M as default};
