import{r as c,u as x,j as e,H as k}from"./app-CSj48lUn.js";import{A as E}from"./AuthSplitLayout-BOFyoxBR.js";import{I as S}from"./InputError-CpM9uXzD.js";import{P as w}from"./PrimaryButton-DmQoBXta.js";import"./LanguageSwitcher-Cs8TVv_x.js";function T({email:o}){const[r,p]=c.useState(["","","","","",""]),[a,i]=c.useState(30),[g,l]=c.useState(!1),{data:R,setData:h,post:b,processing:m,errors:y}=x({email:o,code:""}),{post:j,processing:u}=x({email:o});c.useEffect(()=>{if(a===0){l(!0);return}const t=setTimeout(()=>{i(a-1)},1e3);return()=>clearTimeout(t)},[a]);const v=(t,s)=>{if(!/^\d*$/.test(s))return;const n=[...r];n[t]=s.slice(-1),p(n),s&&t<5&&document.getElementById(`code-${t+1}`)?.focus();const d=n.join("");d.length===6&&(h("code",d),setTimeout(()=>{f(d)},100))},N=(t,s)=>{s.key==="Backspace"&&!r[t]&&t>0&&document.getElementById(`code-${t-1}`)?.focus()},f=(t=null)=>{const s=t||r.join("");b(route("auth.verify-email-code.store"),{data:{email:o,code:s}})},C=()=>{j(route("auth.verify-email-code.resend"),{onSuccess:()=>{i(30),l(!1)}})};return e.jsxs(E,{heroImage:"/verify-email-code.svg",bgAccentClass:"bg-cream-accent",children:[e.jsx(k,{title:"Vérifier l'email"}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-[32px] lg:text-[40px] font-serif font-bold text-primary-black tracking-tight mb-3 leading-tight",children:"Vérifiez votre email"}),e.jsxs("p",{className:"text-gray-muted text-base font-medium",children:["Nous avons envoyé un code à ",e.jsx("span",{className:"font-bold text-primary-black",children:o})]})]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),f()},className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center gap-2 lg:gap-3",children:r.map((t,s)=>e.jsx("input",{id:`code-${s}`,type:"text",inputMode:"numeric",maxLength:1,value:t,onChange:n=>v(s,n.target.value),onKeyDown:n=>N(s,n),className:`\r
                                    w-12 h-14 lg:w-14 lg:h-16\r
                                    text-center text-2xl font-bold\r
                                    bg-input-bg border-2 border-gray-border/50\r
                                    rounded-[16px]\r
                                    text-primary-black\r
                                    focus:outline-none focus:ring-2 focus:ring-gold-accent/30 focus:border-gold-accent\r
                                    transition-all duration-200\r
                                `},s))}),e.jsx(S,{message:y.code,className:"mt-3 text-center"})]}),e.jsx("div",{className:"text-center",children:g?e.jsx("button",{type:"button",onClick:C,disabled:u,className:"text-sm font-bold text-gold-accent hover:underline disabled:opacity-50",children:u?"Envoi...":"Renvoyer le code"}):e.jsxs("p",{className:"text-sm text-gray-muted font-medium",children:["Renvoyer le code dans ",e.jsxs("span",{className:"font-bold text-primary-black",children:[a,"s"]})]})}),e.jsx(w,{className:"w-full",disabled:m||r.join("").length!==6,children:m?"Vérification...":"Vérifier"})]}),e.jsx("div",{className:"mt-6 p-4 bg-gold-accent/5 rounded-[24px] border border-gold-accent/20",children:e.jsxs("p",{className:"text-xs text-gray-muted text-center",children:["Le code expirera dans ",e.jsx("span",{className:"font-bold text-primary-black",children:"10 minutes"})]})})]})}export{T as default};
