import{a as j,u as x,j as e,H as y,L as N}from"./app-3ui6Zh4V.js";import{u as k}from"./useTranslation-C36Wy86N.js";import{H as w,F as v}from"./Footer-D7fuymOK.js";import{T as h}from"./TextInput-CneGO9cV.js";import{I as u}from"./InputLabel-uIPqz4u5.js";import{I as b}from"./InputError-dyO9oETY.js";import"./LanguageSwitcher-Ct-b8yFw.js";function S({mission:t,canSeeAddress:n}){const{t:s}=k(),{auth:l}=j().props,d=l.user.id===t.user_id,o=l.user.id===t.assigned_user_id,r=x({amount:"",message:""}),c=x({question:""}),p=a=>{a.preventDefault(),r.post(route("missions.submit-offer",t.id),{onSuccess:()=>r.reset()})},i=a=>{a.preventDefault(),c.post(route("missions.ask-question",t.id),{onSuccess:()=>c.reset()})},f=()=>{x().post(route("missions.accept",t.id))};return e.jsxs("div",{className:"min-h-screen bg-off-white-bg font-sans",children:[e.jsx(y,{title:t.title}),e.jsx(w,{}),e.jsx("main",{className:"max-w-6xl mx-auto py-16 px-6",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-[40px] p-8 md:p-12 shadow-sm border border-gray-border",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-8",children:[e.jsx("span",{className:"px-4 py-1.5 bg-cream-accent text-primary-black text-[10px] font-black uppercase tracking-widest rounded-full",children:s(t.category||"General")}),t.status==="assigned"?e.jsxs("span",{className:"px-4 py-1.5 bg-gold-accent text-primary-black text-[10px] font-black uppercase tracking-widest rounded-full",children:["âœ… ",s("Assigned")]}):e.jsxs("span",{className:"px-4 py-1.5 bg-green-100 text-green-700 text-[10px] font-black uppercase tracking-widest rounded-full",children:["ðŸŸ¢ ",s("Open")]})]}),e.jsx("h1",{className:"text-4xl font-black text-primary-black mb-6",children:t.title}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-muted font-medium mb-12 leading-relaxed",children:t.description.split(`
`).map((a,g)=>e.jsx("p",{className:"mb-4",children:a},g))}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 pt-8 border-t border-gray-border",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(m,{icon:"ðŸ’°",label:s("Budget"),value:t.budget?`CHF ${t.budget}`:s("Open for offers")}),e.jsx(m,{icon:"ðŸ“…",label:s("Requested Date"),value:t.date_time?new Date(t.date_time).toLocaleString():s("Flexible")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(m,{icon:"ðŸ“",label:s("Location"),value:n?t.exact_address||t.location:t.location||s("Approximate location"),subValue:!n&&s("Exact address revealed after assignment")}),e.jsx(m,{icon:"ðŸ‘¤",label:s("Posted by"),value:t.user.name})]})]})]}),e.jsxs("section",{className:"bg-white rounded-[40px] p-8 md:p-12 shadow-sm border border-gray-border",children:[e.jsxs("h2",{className:"text-2xl font-black text-primary-black mb-8",children:["ðŸ’¬ ",s("Questions & Answers")]}),e.jsx("div",{className:"space-y-8 mb-10",children:t.questions.length>0?t.questions.map(a=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-off-white-bg flex items-center justify-center font-black",children:a.user.name.charAt(0)}),e.jsxs("div",{className:"bg-off-white-bg p-5 rounded-[24px] flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-primary-black mb-1",children:a.user.name}),e.jsx("p",{className:"text-sm text-gray-muted font-medium",children:a.question})]})]}),a.answer?e.jsxs("div",{className:"flex gap-4 ml-12",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-cream-accent flex items-center justify-center font-black",children:t.user.name.charAt(0)}),e.jsxs("div",{className:"bg-cream-accent p-5 rounded-[24px] flex-1 border border-gold-accent/20",children:[e.jsxs("p",{className:"text-sm font-bold text-primary-black mb-1",children:[t.user.name," ",e.jsx("span",{className:"text-[10px] uppercase text-gold-accent ml-2",children:s("Creator")})]}),e.jsx("p",{className:"text-sm text-gray-muted font-medium",children:a.answer})]})]}):d&&e.jsx(F,{missionId:t.id,questionId:a.id,t:s})]},a.id)):e.jsx("p",{className:"text-gray-muted font-bold text-center py-4",children:s("No questions yet.")})}),!d&&t.status==="open"&&e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsx(u,{htmlFor:"question",value:s("Ask a question"),className:"text-xs uppercase tracking-widest font-black"}),e.jsx("textarea",{id:"question",className:"w-full bg-off-white-bg border-gray-border rounded-[24px] p-5 text-sm font-medium focus:border-gold-accent focus:ring-0 min-h-[100px]",placeholder:s("Ask for more details about the mission..."),value:c.data.question,onChange:a=>c.setData("question",a.target.value),required:!0}),e.jsx("button",{type:"submit",disabled:c.processing,className:"px-8 py-3 bg-primary-black text-white font-black rounded-full hover:bg-black transition-all text-sm disabled:opacity-50",children:s("Post Question")})]})]})]}),e.jsx("div",{className:"space-y-8",children:d?e.jsxs("section",{className:"bg-white rounded-[40px] p-8 shadow-sm border border-gray-border sticky top-8",children:[e.jsxs("h2",{className:"text-xl font-black text-primary-black mb-6",children:["ðŸ¤ ",s("Offers")]}),e.jsx("div",{className:"space-y-6",children:t.offers.length>0?t.offers.map(a=>e.jsxs("div",{className:"p-5 bg-off-white-bg rounded-[24px] border border-gray-border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-primary-black",children:a.user.name}),e.jsx("p",{className:"text-xs text-gray-muted font-bold",children:"â˜… 5.0 (New)"})]}),e.jsxs("p",{className:"text-lg font-black text-gold-accent",children:["CHF ",a.amount]})]}),e.jsx("p",{className:"text-xs text-gray-muted font-medium mb-6 line-clamp-2",children:a.message}),t.status==="open"&&e.jsx("button",{onClick:()=>x().post(route("missions.select-offer",{mission:t.id,offer:a.id})),className:"w-full py-3 bg-primary-black text-white font-black rounded-full hover:bg-black transition-all text-sm shadow-md",children:s("Accept Offer")}),a.status==="accepted"&&e.jsx("div",{className:"text-center py-2 bg-gold-accent text-primary-black font-black text-[10px] uppercase rounded-full",children:s("Selected")})]},a.id)):e.jsx("p",{className:"text-gray-muted font-bold text-center text-sm",children:s("Waiting for offers...")})})]}):e.jsx("section",{className:"bg-white rounded-[40px] p-8 shadow-sm border border-gray-border sticky top-8",children:t.status==="assigned"?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-xl font-black text-primary-black mb-2",children:s(o?"Mission Assigned to You!":"Mission Booked")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold mb-6",children:s(o?"You can now communicate with the creator and see the exact address.":"This mission has already been assigned to another performer.")}),o&&e.jsxs(N,{href:route("dashboard",{chat_with:t.user_id}),className:"w-full py-4 bg-primary-black text-white font-black rounded-full hover:bg-black transition-all flex items-center justify-center gap-2",children:["ðŸ’¬ ",s("Message Creator")]})]}):t.price_type==="fixed"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center pb-6 border-b border-gray-border",children:[e.jsx("p",{className:"text-xs font-black text-gray-muted uppercase tracking-widest mb-1",children:s("Fixed Price")}),e.jsxs("p",{className:"text-4xl font-black text-primary-black",children:["CHF ",t.budget]})]}),e.jsxs("button",{onClick:f,className:"w-full py-5 bg-primary-black text-white font-black rounded-full hover:bg-black transition-all shadow-xl text-lg",children:["âš¡ ",s("Accept Instantly")]}),e.jsx("p",{className:"text-[10px] text-gray-muted font-bold text-center leading-relaxed",children:s("By accepting, you commit to completing this mission for the fixed price shown.")})]}):e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-black text-primary-black mb-4",children:["ðŸ·ï¸ ",s("Submit an Offer")]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"amount",value:s("Your price"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"amount",type:"number",className:"w-full pl-12",placeholder:"0.00",value:r.data.amount,onChange:a=>r.setData("amount",a.target.value),required:!0}),e.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 font-black text-gray-muted",children:"CHF"})]}),e.jsx(b,{message:r.errors.amount,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"message",value:s("Message (Optional)"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("textarea",{id:"message",className:"w-full bg-off-white-bg border-gray-border rounded-[24px] p-5 text-sm font-medium focus:border-gold-accent focus:ring-0 min-h-[100px]",placeholder:s("Tell the creator why you are a good fit..."),value:r.data.message,onChange:a=>r.setData("message",a.target.value)}),e.jsx(b,{message:r.errors.message,className:"mt-2"})]}),e.jsxs("button",{type:"submit",disabled:r.processing,className:"w-full py-5 bg-gold-accent text-primary-black font-black rounded-full hover:opacity-90 transition-all shadow-xl text-lg",children:["ðŸš€ ",s("Send Offer")]})]})})})]})}),e.jsx(v,{})]})}function F({missionId:t,questionId:n,t:s}){const{data:l,setData:d,post:o,processing:r,reset:c}=x({answer:""}),p=i=>{i.preventDefault(),o(route("missions.answer-question",{mission:t,question:n}),{onSuccess:()=>c()})};return e.jsxs("form",{onSubmit:p,className:"ml-12 mt-2 flex gap-4",children:[e.jsx(h,{value:l.answer,onChange:i=>d("answer",i.target.value),placeholder:s("Type your answer..."),className:"flex-1 !py-2 !px-4 !text-xs",required:!0}),e.jsx("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-gold-accent text-primary-black font-black rounded-full hover:opacity-90 transition-all text-[10px] uppercase tracking-widest disabled:opacity-50",children:s("Answer")})]})}function m({icon:t,label:n,value:s,subValue:l}){return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-2xl mt-1",children:t}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-gray-muted uppercase tracking-widest mb-1",children:n}),e.jsx("p",{className:"font-black text-primary-black",children:s}),l&&e.jsx("p",{className:"text-[10px] font-bold text-gold-accent mt-1 italic",children:l})]})]})}export{S as default};
