import{a as i,u as b,j as t,H as D,r as w}from"./app-QnVUizLf.js";import{A as I}from"./AuthSplitLayout-DULam4K7.js";import{I as R}from"./InputError-ChJ8MzTF.js";import{P as $}from"./PrimaryButton-BLT60-sn.js";import{u as B}from"./useTranslation-x70bPv3T.js";function K({email:c}){const[n,m]=i.useState(["","","","","",""]),[l,f]=i.useState(30),[j,u]=i.useState(!1),{t:r}=B(),{data:P,setData:x,post:T,processing:h,errors:y}=b({email:c,code:""}),{post:N,processing:g}=b({email:c});i.useEffect(()=>{if(l===0){u(!0);return}const s=setTimeout(()=>{f(l-1)},1e3);return()=>clearTimeout(s)},[l]);const v=(s,e)=>{if(!/^\d*$/.test(e))return;const o=[...n];o[s]=e.slice(-1),m(o),e&&s<5&&document.getElementById(`code-${s+1}`)?.focus();const a=o.join("");a.length===6&&(x("code",a),d(a))},C=(s,e)=>{e.key==="Backspace"&&!n[s]&&s>0&&document.getElementById(`code-${s-1}`)?.focus()},E=s=>{s.preventDefault();const e=s.clipboardData.getData("text").slice(0,6);if(!/^\d+$/.test(e))return;const o=[...n];if(e.split("").forEach((a,p)=>{p<6&&(o[p]=a)}),m(o),e.length===6)x("code",e),d(e);else{const a=e.length;a<6&&document.getElementById(`code-${a}`)?.focus()}},d=(s=null)=>{const e=s||n.join("");e.length===6&&w.post(route("auth.verify-email-code.store"),{email:c,code:e},{preserveState:!1,onSuccess:()=>{},onError:o=>{console.error("Verification failed:",o)}})},S=()=>{N(route("auth.verify-email-code.resend"),{onSuccess:()=>{f(30),u(!1)}})};return t.jsxs(I,{heroImage:"/images/illustrations/verify-email.svg",bgAccentClass:"bg-cream-accent",children:[t.jsx(D,{title:r("Verify Email")}),t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-[32px] lg:text-[40px] font-serif font-bold text-oflem-charcoal tracking-tight mb-3 leading-tight",children:r("Verify your email")}),t.jsxs("p",{className:"text-gray-muted text-base font-medium",children:[r("We've sent a code to "),t.jsx("span",{className:"font-bold text-oflem-charcoal",children:c})]})]}),t.jsxs("form",{onSubmit:s=>{s.preventDefault(),d()},className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-center gap-2 lg:gap-3",children:n.map((s,e)=>t.jsx("input",{id:`code-${e}`,type:"text",inputMode:"numeric",maxLength:1,value:s,onChange:o=>v(e,o.target.value),onKeyDown:o=>C(e,o),onPaste:E,className:`\r
                                    w-12 h-14 lg:w-14 lg:h-16\r
                                    text-center text-2xl font-bold\r
                                    bg-input-bg border-2 border-gray-border/50\r
                                    rounded-[16px]\r
                                    text-oflem-charcoal\r
                                    focus:outline-none focus:ring-2 focus:ring-oflem-terracotta/30 focus:border-oflem-terracotta\r
                                    transition-all duration-200\r
                                `},e))}),t.jsx(R,{message:y.code,className:"mt-3 text-center"})]}),t.jsx("div",{className:"text-center",children:j?t.jsx("button",{type:"button",onClick:S,disabled:g,className:"text-sm font-bold text-oflem-terracotta hover:underline disabled:opacity-50",children:r(g?"Sending...":"Resend code")}):t.jsxs("p",{className:"text-sm text-gray-muted font-medium",children:[r("Resend code in "),t.jsxs("span",{className:"font-bold text-oflem-charcoal",children:[l,"s"]})]})}),t.jsx($,{className:"w-full",disabled:h||n.join("").length!==6,processing:h,children:r("Verify")})]}),t.jsx("div",{className:"mt-6 p-4 bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light/5 rounded-[24px] border border-oflem-terracotta/20",children:t.jsxs("p",{className:"text-xs text-gray-muted text-center",children:[r("The code will expire in "),t.jsx("span",{className:"font-bold text-oflem-charcoal",children:r("10 minutes")})]})})]})}export{K as default};
