import{a as c,u as x,j as e,H as C,r as k}from"./app-Dk__5EGU.js";import{A as E}from"./AuthSplitLayout-CjPN-M9B.js";import{I as S}from"./InputError-0bBLdRrJ.js";import{P as w}from"./PrimaryButton-Di3VwKP1.js";import"./LanguageSwitcher-kqEQMpS1.js";function D({email:o}){const[r,p]=c.useState(["","","","","",""]),[a,l]=c.useState(30),[g,d]=c.useState(!1),{setData:h,processing:m,errors:b}=x({email:o,code:""}),{post:y,processing:u}=x({email:o});c.useEffect(()=>{if(a===0){d(!0);return}const t=setTimeout(()=>{l(a-1)},1e3);return()=>clearTimeout(t)},[a]);const j=(t,s)=>{if(!/^\d*$/.test(s))return;const n=[...r];n[t]=s.slice(-1),p(n),s&&t<5&&document.getElementById(`code-${t+1}`)?.focus();const i=n.join("");i.length===6&&(h("code",i),setTimeout(()=>{f(i)},100))},v=(t,s)=>{s.key==="Backspace"&&!r[t]&&t>0&&document.getElementById(`code-${t-1}`)?.focus()},f=(t=null)=>{const s=t||r.join("");k.post(route("auth.verify-email-code.store"),{email:o,code:s})},N=()=>{y(route("auth.verify-email-code.resend"),{onSuccess:()=>{l(30),d(!1)}})};return e.jsxs(E,{heroImage:"/images/illustrations/verify-email.svg",bgAccentClass:"bg-cream-accent",children:[e.jsx(C,{title:"Vérifier l'email"}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-[32px] lg:text-[40px] font-serif font-bold text-primary-black tracking-tight mb-3 leading-tight",children:"Vérifiez votre email"}),e.jsxs("p",{className:"text-gray-muted text-base font-medium",children:["Nous avons envoyé un code à ",e.jsx("span",{className:"font-bold text-primary-black",children:o})]})]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),f()},className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center gap-2 lg:gap-3",children:r.map((t,s)=>e.jsx("input",{id:`code-${s}`,type:"text",inputMode:"numeric",maxLength:1,value:t,onChange:n=>j(s,n.target.value),onKeyDown:n=>v(s,n),className:`\r
                                    w-12 h-14 lg:w-14 lg:h-16\r
                                    text-center text-2xl font-bold\r
                                    bg-input-bg border-2 border-gray-border/50\r
                                    rounded-[16px]\r
                                    text-primary-black\r
                                    focus:outline-none focus:ring-2 focus:ring-gold-accent/30 focus:border-gold-accent\r
                                    transition-all duration-200\r
                                `},s))}),e.jsx(S,{message:b.code,className:"mt-3 text-center"})]}),e.jsx("div",{className:"text-center",children:g?e.jsx("button",{type:"button",onClick:N,disabled:u,className:"text-sm font-bold text-gold-accent hover:underline disabled:opacity-50",children:u?"Envoi...":"Renvoyer le code"}):e.jsxs("p",{className:"text-sm text-gray-muted font-medium",children:["Renvoyer le code dans ",e.jsxs("span",{className:"font-bold text-primary-black",children:[a,"s"]})]})}),e.jsx(w,{className:"w-full",disabled:m||r.join("").length!==6,children:m?"Vérification...":"Vérifier"})]}),e.jsx("div",{className:"mt-6 p-4 bg-gold-accent/5 rounded-[24px] border border-gold-accent/20",children:e.jsxs("p",{className:"text-xs text-gray-muted text-center",children:["Le code expirera dans ",e.jsx("span",{className:"font-bold text-primary-black",children:"10 minutes"})]})})]})}export{D as default};
