import{b as M,a as l,u as B,j as e,H as E,c as I}from"./app-VuuoFMYi.js";import{u as P}from"./useTranslation-DhCHActQ.js";import{A as R}from"./AuthSplitLayout-DiNn_DmZ.js";import{P as k}from"./PrimaryButton-CS5B8uoM.js";import{I as T}from"./InputError-DaLsWigP.js";import{B as V}from"./BackButton-CCyDU7V3.js";function J(){const{t:s}=P(),{email:u="",phone:h=""}=M().props,[o,p]=l.useState(30),[A,g]=l.useState(!1),[c,i]=l.useState(!1),[n,m]=l.useState(null),[x,f]=l.useState(["","","","","",""]),{data:w,setData:b,post:C,processing:j,errors:S,reset:H}=B({code:""});l.useEffect(()=>{if(c&&o>0){const t=setInterval(()=>p(r=>r-1),1e3);return()=>clearInterval(t)}else o===0&&g(!0)},[c,o]);const y=t=>{const r=Math.floor(t/60),a=t%60;return`${r}:${a.toString().padStart(2,"0")}`},v=t=>{m(t),i(!0),p(30),g(!1),I.post(route("auth.verify-otp.send"),{method:t}).catch(()=>i(!1))},$=t=>{t.preventDefault();const r=t.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(!r)return;const a=[...x];for(let d=0;d<r.length;d++)a[d]=r[d];f(a),b("code",a.join(""));const L=Math.min(r.length,5),N=document.getElementById(`otp-${L}`);N&&N.focus()},O=(t,r)=>{if(isNaN(t))return;const a=[...x];a[r]=t,f(a),b("code",a.join("")),t&&r<5&&document.getElementById(`otp-${r+1}`).focus()},D=t=>{t.preventDefault(),C(route("auth.verify-otp"))};return e.jsxs(R,{heroImage:c?"/images/illustrations/otp-verify.svg":"/images/illustrations/otp-selection.svg",bgAccentClass:"bg-cream-accent",children:[e.jsx(E,{title:s("Verify OTP")}),e.jsxs("div",{className:"mb-8 lg:mb-10 text-center lg:text-left relative",children:[e.jsx(V,{href:c?"#":route("login"),onClick:c?t=>{t.preventDefault(),i(!1)}:void 0,className:"absolute -top-12 left-0"}),e.jsx("h2",{className:"text-lg font-medium text-primary-black mb-1",children:s("Oflem")}),e.jsx("h1",{className:"text-[32px] lg:text-[40px] font-black text-primary-black tracking-tight mb-2",children:s(c?"Almost done":"One small code to go")}),e.jsx("p",{className:"text-gray-muted text-sm font-medium",children:s(c?"Enter the code received by email.":"We'll send you a code by email to continue.")})]}),e.jsx("div",{className:"space-y-6",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-primary-black font-black text-center",children:n==="email"?u:h})}),e.jsxs("form",{onSubmit:D,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-black text-primary-black block text-center",children:s("Enter the code received by email.")}),e.jsx("div",{className:"flex justify-between gap-1 sm:gap-2 max-w-sm mx-auto",children:x.map((t,r)=>e.jsx("input",{id:`otp-${r}`,type:"text",maxLength:"1",value:t,onChange:a=>O(a.target.value,r),onPaste:$,className:"w-10 h-10 sm:w-12 sm:h-12 text-center text-xl font-black bg-input-bg border border-gray-border focus:ring-1 focus:ring-gold-accent focus:border-gold-accent rounded-full outline-none transition-all"},r))})]}),e.jsx(T,{message:S.code,className:"text-center ml-0"}),e.jsx(k,{type:"submit",disabled:j||w.code.length!==6,processing:j,className:"w-full",children:s("Verify Code")}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"text-gray-muted",children:s("Didn't receive code?")}),e.jsx("button",{type:"button",onClick:()=>v(n),disabled:o>0,className:`font-black transition-colors ${o>0?"text-gray-400 cursor-not-allowed":"text-primary-black underline hover:text-gold-accent"}`,children:o>0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"hidden lg:inline",children:[s("Resend Code in")," ",y(o)]}),e.jsxs("span",{className:"lg:hidden",children:[s("Resend in")," ",y(o)]})]}):s("Resend Code")})]})}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"text-xs text-gray-muted font-black hover:text-primary-black transition-colors",children:s("Change Method")})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{onClick:()=>m("email"),className:`p-5 bg-white border rounded-[24px] cursor-pointer transition-all flex items-center justify-between group ${n==="email"?"border-gold-accent ring-1 ring-gold-accent":"border-gray-border hover:border-gold-accent"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cream-accent flex items-center justify-center text-gold-accent transition-colors group-hover:bg-gold-accent group-hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-primary-black",children:s("Send code to email :")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:u})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${n==="email"?"border-gold-accent":"border-gray-border group-hover:border-gold-accent"}`,children:e.jsx("div",{className:`w-3 h-3 rounded-full transition-colors ${n==="email"?"bg-gold-accent":"bg-transparent"}`})})]}),e.jsxs("div",{onClick:()=>m("phone"),className:`p-5 bg-white border rounded-[24px] cursor-pointer transition-all flex items-center justify-between group ${n==="phone"?"border-gold-accent ring-1 ring-gold-accent":"border-gray-border hover:border-gold-accent"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cream-accent flex items-center justify-center text-gold-accent transition-colors group-hover:bg-gold-accent group-hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-primary-black",children:s("Send code to phone number :")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:h})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${n==="phone"?"border-gold-accent":"border-gray-border group-hover:border-gold-accent"}`,children:e.jsx("div",{className:`w-3 h-3 rounded-full transition-colors ${n==="phone"?"bg-gold-accent":"bg-transparent"}`})})]}),e.jsx(k,{onClick:()=>v(n),disabled:!n,processing:!1,className:"w-full mt-6",children:s("Verify Account")})]})})]})}export{J as default};
