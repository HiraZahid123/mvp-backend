import{a as r,j as e,u as x,H as f}from"./app-B-8gU7sK.js";import{A as g}from"./AuthSplitLayout-C7dhZVfK.js";import{I as v}from"./InputLabel-BW3KmD4X.js";import{T as b}from"./TextInput-DfJ67QdT.js";import{u as j}from"./useTranslation-BlOXshqE.js";import{I as h}from"./InputError-D1oEaz7A.js";import{P as y}from"./PrimaryButton-CY4bAbmZ.js";import{B as w}from"./BackButton-xgbK840L.js";function N({title:o,titleId:a,...l},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},l),o?r.createElement("title",{id:a},o):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const C=r.forwardRef(N);function k({value:o,onChange:a,previewUrl:l}){const{t:s}=j(),i=r.useRef(null),[c,d]=r.useState(l||null),u=n=>{const t=n.target.files[0];if(t){a(t);const p=new FileReader;p.onloadend=()=>{d(p.result)},p.readAsDataURL(t)}},m=()=>{i.current?.click()};return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{onClick:m,className:"relative w-32 h-32 rounded-full overflow-hidden border-4 border-gray-border/30 cursor-pointer group hover:border-gold-accent transition-all duration-300",children:[c?e.jsx("img",{src:c,alt:"Profile preview",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gold-accent/20 to-gold-accent/5 flex items-center justify-center",children:e.jsx("img",{src:"/images/branding/oflem-placeholder.svg",alt:"OFLEM placeholder",className:"w-16 h-16 opacity-40 group-hover:opacity-60 transition-opacity duration-300",onError:n=>{n.target.style.display="none",n.target.parentElement.innerHTML=`
                                    <svg class="w-16 h-16 text-gray-muted/40" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                                    </svg>
                                `}})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsx(C,{className:"w-8 h-8 text-white"})})]}),e.jsx("button",{type:"button",onClick:m,className:`\r
                    px-6 py-2.5 \r
                    bg-white border-2 border-gray-border/50\r
                    rounded-[24px]\r
                    text-sm font-bold text-primary-black\r
                    hover:border-gold-accent hover:bg-gold-accent/5\r
                    transition-all duration-300\r
                `,children:s("Choisir une photo")}),e.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:u,className:"hidden"}),e.jsx("p",{className:"text-xs text-gray-muted text-center max-w-xs",children:s("Optionnel • Une photo multiplie vos opportunités")})]})}function B({user:o}){const[a,l]=r.useState(null),{data:s,setData:i,post:c,processing:d,errors:u}=x({username:o?.username||o?.name||"",profile_photo:null}),m=t=>{l(t),i("profile_photo",t)},n=t=>{t.preventDefault(),c(route("auth.complete-identity.store"),{forceFormData:!0})};return e.jsxs(g,{heroImage:"/images/illustrations/verify-email.svg",bgAccentClass:"bg-cream-accent",children:[e.jsx(f,{title:"Profil"}),e.jsx("div",{className:"flex items-center mb-8",children:e.jsx(w,{href:route("auth.select-role"),className:"text-sm",children:"Retour"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-[32px] lg:text-[40px] font-serif font-bold text-primary-black tracking-tight mb-3 leading-tight",children:["Enchanté !",e.jsx("br",{}),"Presque prêt..."]}),e.jsxs("p",{className:"text-gray-muted text-base font-medium px-4",children:["Ajoutez une photo et personnalisez votre pseudo si vous le souhaitez.",e.jsx("br",{}),"Sinon, on utilisera votre nom."]})]}),e.jsxs("form",{onSubmit:n,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(k,{value:a,onChange:m,previewUrl:o?.profile_photo_url}),e.jsx(h,{message:u.profile_photo,className:"mt-2 text-center"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(v,{htmlFor:"username",value:"Nom d'affichage (optionnel)",className:"text-center lg:text-left"}),e.jsx(b,{id:"username",type:"text",value:s.username,onChange:t=>i("username",t.target.value),placeholder:"Laissez vide pour utiliser votre nom",autoComplete:"nickname"}),e.jsx(h,{message:u.username})]}),e.jsx(y,{className:"w-full",disabled:d,processing:d,children:"Continuer"})]}),e.jsx("div",{className:"mt-6 p-4 bg-gold-accent/5 rounded-[24px] border border-gold-accent/20",children:e.jsx("p",{className:"text-xs text-gray-muted text-center",children:"Vos informations restent privées et sécurisées."})})]})}export{B as default};
