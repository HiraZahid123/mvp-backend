import{a as p,u as N,j as e,H as k,c as _}from"./app-QnVUizLf.js";import{A as S}from"./AuthenticatedLayout-BiYnB1-m.js";import{u as z}from"./useTranslation-x70bPv3T.js";import{I as i}from"./InputLabel-Dz7dSTSW.js";import{I as c}from"./InputError-ChJ8MzTF.js";import{S as A}from"./sparkles-BSG92yTY.js";import"./Header-Bh-tmRrQ.js";import"./createLucideIcon-ouguqvvq.js";import"./transition-DT5QNeAT.js";import"./circle-user-CKxVRQcr.js";import"./Footer-BK0BU5M7.js";function R({existingProfile:o=null}){const{t:a}=z(),[n,x]=p.useState(o?2:1),[u,b]=p.useState(!1),[g,d]=p.useState(""),{data:t,setData:l,post:y,processing:f,errors:m}=N({description:"",bio:o?.bio||"",years_experience:o?.years_experience||0,main_category:o?.main_category||"",skills:o?.skills?.map(r=>({name:r.name,proficiency:r.pivot?.proficiency_level||"intermediate"}))||[],raw_analysis:o?.raw_ai_analysis||null}),h=async()=>{if(!t.description||t.description.length<20){d(a("Please provide more details (min 20 chars)."));return}b(!0),d("");try{const s=(await _.post(route("onboarding.analyze"),{description:t.description})).data;l(w=>({...w,bio:s.professional_bio||"",years_experience:s.years_experience||0,main_category:s.main_category||"General",skills:s.skills||[],raw_analysis:s})),x(2)}catch(r){d(a("Failed to analyze. Please try again or fill manually.")),console.error(r)}finally{b(!1)}},j=r=>{r.preventDefault(),y(route("onboarding.store"))},v=r=>{const s=[...t.skills];s.splice(r,1),l("skills",s)};return e.jsxs(S,{header:a(o?"Edit Provider Profile":"Provider Onboarding"),maxWidth:"max-w-3xl",showFooter:!0,children:[e.jsx(k,{title:a("Provider Onboarding")}),e.jsx("div",{className:"py-16",children:e.jsxs("div",{className:"bg-white rounded-[40px] p-8 md:p-12 shadow-sm border border-gray-border",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h2",{className:"text-3xl font-black text-oflem-charcoal mb-3",children:a(n===1?"Tell us about your expertise":"Review your profile")}),e.jsx("p",{className:"text-gray-muted font-bold",children:a(n===1?"Our AI will analyze your skills to match you with the right missions.":"We extracted this from your description. Does it look correct?")})]}),n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"description",value:a("Describe your services & experience"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("textarea",{id:"description",value:t.description,onChange:r=>l("description",r.target.value),className:"w-full bg-oflem-cream border-gray-border rounded-[24px] p-5 text-sm font-medium focus:border-oflem-terracotta focus:ring-0 min-h-[200px] transition-all",placeholder:a("Example: I have been a carpenter for 10 years, specializing in custom furniture and repairs. I also have experience with painting and drywall...")}),e.jsx(c,{message:g,className:"mt-2"})]}),e.jsx("button",{onClick:h,disabled:u,className:"w-full py-5 bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light text-oflem-charcoal font-black rounded-full hover:opacity-90 transition-all shadow-md text-lg flex items-center justify-center gap-3",children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-6 h-6 border-4 border-oflem-charcoal border-t-transparent rounded-full animate-spin"}),a("Analyzing...")]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{size:20})," ",a("Analyze Profile")]})})]}),n===2&&e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"bio",value:a("Professional Bio"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("textarea",{id:"bio",value:t.bio,onChange:r=>l("bio",r.target.value),className:"w-full bg-oflem-cream border-gray-border rounded-[24px] p-5 text-sm font-medium focus:border-oflem-terracotta focus:ring-0 min-h-[100px]"}),e.jsx(c,{message:m.bio,className:"mt-2"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"years",value:a("Years of Experience"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("input",{type:"number",id:"years",value:t.years_experience,onChange:r=>l("years_experience",r.target.value),className:"w-full bg-oflem-cream border-gray-border rounded-full px-6 py-4 text-sm font-bold focus:border-oflem-terracotta focus:ring-0"}),e.jsx(c,{message:m.years_experience,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"category",value:a("Main Category"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("input",{type:"text",id:"category",value:t.main_category,onChange:r=>l("main_category",r.target.value),className:"w-full bg-oflem-cream border-gray-border rounded-full px-6 py-4 text-sm font-bold focus:border-oflem-terracotta focus:ring-0"}),e.jsx(c,{message:m.main_category,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(i,{value:a("Extracted Skills"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsxs("div",{className:"bg-oflem-cream rounded-[24px] p-6 border border-gray-border min-h-[100px] flex flex-wrap gap-3",children:[t.skills.map((r,s)=>e.jsxs("div",{className:"bg-white border border-gray-border px-4 py-2 rounded-full flex items-center gap-2 shadow-sm",children:[e.jsx("span",{className:"font-bold text-sm text-oflem-charcoal",children:r.name}),e.jsx("span",{className:`text-[10px] uppercase font-black px-2 py-0.5 rounded-full ${r.proficiency==="expert"?"bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light text-oflem-charcoal":r.proficiency==="beginner"?"bg-gray-200 text-gray-500":"bg-blue-100 text-blue-600"}`,children:r.proficiency}),e.jsx("button",{type:"button",onClick:()=>v(s),className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center hover:bg-red-500 hover:text-white transition-colors",children:"Ã—"})]},s)),t.skills.length===0&&e.jsx("p",{className:"text-gray-muted text-sm italic",children:a("No skills detected. Try adding more detail to your description.")})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>x(1),className:"flex-1 py-4 bg-white border-2 border-gray-border text-oflem-charcoal font-black rounded-full hover:bg-oflem-cream transition-all",children:a("Back")}),e.jsx("button",{type:"submit",disabled:f,className:"flex-1 py-4 bg-oflem-charcoal text-white font-black rounded-full hover:bg-black transition-all shadow-xl",children:a(f?"Saving...":"Complete Profile")})]})]})]})})]})}export{R as default};
