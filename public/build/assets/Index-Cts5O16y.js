import{j as e,H as h,L as p,r as u}from"./app-BCZRSgt0.js";import{u as f}from"./useTranslation-Q6xBOp6d.js";import{A as g}from"./AuthenticatedLayout-BWjZmRog.js";import{D as d}from"./dollar-sign-vuUBx8Us.js";import{T as b}from"./trending-up-Cur48GHK.js";import{C as n}from"./circle-check-big-CyFC0zHY.js";import{R as x,b as j}from"./Header-BW9rDuWb.js";import{C as N}from"./circle-alert-Cns69EN0.js";import"./Footer-CqxkWKQA.js";import"./createLucideIcon-ooO1ZpS2.js";import"./transition-DEbVv5nb.js";import"./circle-user-5nndWB2d.js";function M({payments:l,stats:r}){const{t}=f(),o=s=>{const a=prompt(t("Refund reason:"));a&&u.post(route("admin.payments.refund",s),{reason:a},{preserveScroll:!0,onSuccess:()=>alert(t("Refund processed successfully"))})},i=s=>{const a={pending:{bg:"bg-yellow-100",text:"text-yellow-700",icon:N},held:{bg:"bg-blue-100",text:"text-blue-700",icon:d},captured:{bg:"bg-green-100",text:"text-green-700",icon:n},refunded:{bg:"bg-red-100",text:"text-red-700",icon:j}},c=a[s]||a.pending,m=c.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-black uppercase ${c.bg} ${c.text}`,children:[e.jsx(m,{className:"w-3 h-3"}),t(s)]})};return e.jsxs(g,{children:[e.jsx(h,{title:t("Payment Management")}),e.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-6",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-4xl font-black text-oflem-charcoal mb-2",children:t("Payment Management")}),e.jsx("p",{className:"text-gray-muted font-bold",children:t("Monitor transactions and process refunds")})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(d,{className:"w-5 h-5 text-oflem-terracotta"}),e.jsx("p",{className:"text-xs font-black uppercase text-gray-muted",children:"Total Revenue"})]}),e.jsxs("p",{className:"text-3xl font-black text-oflem-charcoal",children:["CHF ",r?.total_revenue?.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(b,{className:"w-5 h-5 text-green-500"}),e.jsx("p",{className:"text-xs font-black uppercase text-gray-muted",children:"Commission"})]}),e.jsxs("p",{className:"text-3xl font-black text-oflem-charcoal",children:["CHF ",r?.total_commission?.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(n,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"text-xs font-black uppercase text-gray-muted",children:"Held"})]}),e.jsx("p",{className:"text-3xl font-black text-oflem-charcoal",children:r?.held_count||"0"})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(x,{className:"w-5 h-5 text-red-500"}),e.jsx("p",{className:"text-xs font-black uppercase text-gray-muted",children:"Refunded"})]}),e.jsx("p",{className:"text-3xl font-black text-oflem-charcoal",children:r?.refunded_count||"0"})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-oflem-cream border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Transaction"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Mission"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-wider text-gray-muted",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-black uppercase tracking-wider text-gray-muted",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l?.data?.map(s=>e.jsxs("tr",{className:"hover:bg-oflem-cream/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-black text-oflem-charcoal",children:["#",s.id]}),e.jsx("p",{className:"text-xs text-gray-muted font-medium",children:s.payment_intent_id})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(p,{href:route("admin.missions.show",s.mission_id),className:"font-bold text-oflem-terracotta hover:underline",children:["Mission #",s.mission_id]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-black text-oflem-charcoal",children:["CHF ",s.amount]}),e.jsxs("p",{className:"text-xs text-gray-muted",children:["Commission: CHF ",s.platform_commission]})]})}),e.jsx("td",{className:"px-6 py-4",children:i(s.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm font-medium text-gray-600",children:new Date(s.created_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 text-right",children:s.status==="held"||s.status==="captured"?e.jsxs("button",{onClick:()=>o(s.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-xl font-bold text-sm hover:bg-red-200 transition-colors",children:[e.jsx(x,{className:"w-4 h-4 inline mr-1"}),"Refund"]}):e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"N/A"})})]},s.id))})]})})}),(!l?.data||l.data.length===0)&&e.jsxs("div",{className:"bg-white rounded-3xl p-20 text-center shadow-sm border border-gray-100 mt-8",children:[e.jsx(d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-black text-oflem-charcoal mb-4",children:t("No payments yet")}),e.jsx("p",{className:"text-gray-muted font-medium",children:t("Payments will appear here once missions are completed")})]})]})]})}export{M as default};
