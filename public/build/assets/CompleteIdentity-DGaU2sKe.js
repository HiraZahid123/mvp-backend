import{a,j as e,u as f,H as x}from"./app-QnVUizLf.js";import{A as g}from"./AuthSplitLayout-DULam4K7.js";import{I as v}from"./InputLabel-Dz7dSTSW.js";import{T as b}from"./TextInput-DdDBk4UH.js";import{u as j}from"./useTranslation-x70bPv3T.js";import{I as h}from"./InputError-ChJ8MzTF.js";import{P as y}from"./PrimaryButton-BLT60-sn.js";import{B as w}from"./BackButton-BQnzIQ-V.js";function N({title:o,titleId:t,...l},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},l),o?a.createElement("title",{id:t},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const C=a.forwardRef(N);function k({value:o,onChange:t,previewUrl:l}){const{t:s}=j(),d=a.useRef(null),[i,p]=a.useState(l||null),u=n=>{const m=n.target.files[0];if(m){t(m);const r=new FileReader;r.onloadend=()=>{p(r.result)},r.readAsDataURL(m)}},c=()=>{d.current?.click()};return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{onClick:c,className:"relative w-32 h-32 rounded-full overflow-hidden border-4 border-gray-border/30 cursor-pointer group hover:border-oflem-terracotta transition-all duration-300",children:[i?e.jsx("img",{src:i,alt:"Profile preview",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-oflem-terracotta/20 to-oflem-terracotta/5 flex items-center justify-center",children:e.jsx("img",{src:"/images/branding/oflem-placeholder.svg",alt:"OFLEM placeholder",className:"w-16 h-16 opacity-40 group-hover:opacity-60 transition-opacity duration-300",onError:n=>{n.target.style.display="none",n.target.parentElement.innerHTML=`
                                    <svg class="w-16 h-16 text-gray-muted/40" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                                    </svg>
                                `}})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsx(C,{className:"w-8 h-8 text-white"})})]}),e.jsx("button",{type:"button",onClick:c,className:`\r
                    px-6 py-2.5 \r
                    bg-white border-2 border-gray-border/50\r
                    rounded-[24px]\r
                    text-sm font-bold text-oflem-charcoal\r
                    hover:border-oflem-terracotta hover:bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light/5\r
                    transition-all duration-300\r
                `,children:s("Choisir une photo")}),e.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:u,className:"hidden"}),e.jsx("p",{className:"text-xs text-gray-muted text-center max-w-xs",children:s("Optionnel • Une photo multiplie vos opportunités")})]})}function M({user:o}){const{t}=useTranslation(),[l,s]=a.useState(null),{data:d,setData:i,post:p,processing:u,errors:c}=f({username:o?.username||o?.name||"",profile_photo:null}),n=r=>{s(r),i("profile_photo",r)},m=r=>{r.preventDefault(),p(route("auth.complete-identity.store"),{forceFormData:!0})};return e.jsxs(g,{heroImage:"/images/illustrations/verify-email.svg",bgAccentClass:"bg-cream-accent",children:[e.jsx(x,{title:t("Profile")}),e.jsx("div",{className:"flex items-center mb-8",children:e.jsx(w,{href:route("auth.select-role"),className:"text-sm",children:t("Back")})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-[32px] lg:text-[40px] font-serif font-bold text-oflem-charcoal tracking-tight mb-3 leading-tight",children:[t("Nice to meet you!"),e.jsx("br",{}),t("Almost ready...")]}),e.jsxs("p",{className:"text-gray-muted text-base font-medium px-4",children:[t("Add a photo and customize your username if you wish."),e.jsx("br",{}),t("Otherwise, we'll use your name.")]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(k,{value:l,onChange:n,previewUrl:o?.profile_photo_url}),e.jsx(h,{message:c.profile_photo,className:"mt-2 text-center"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(v,{htmlFor:"username",value:t("Display name (optional)"),className:"text-center lg:text-left"}),e.jsx(b,{id:"username",type:"text",value:d.username,onChange:r=>i("username",r.target.value),placeholder:t("Leave empty to use your name"),autoComplete:"nickname"}),e.jsx(h,{message:c.username})]}),e.jsx(y,{className:"w-full",disabled:u,processing:u,children:t("Continue")})]}),e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light/5 rounded-[24px] border border-oflem-terracotta/20",children:e.jsx("p",{className:"text-xs text-gray-muted text-center",children:t("Your information remains private and secure.")})})]})}export{M as default};
