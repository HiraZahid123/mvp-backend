import{a as I,r as c,u as E,j as e,H,L as b,c as j,d as T}from"./app-CSj48lUn.js";import{u as W}from"./useTranslation-CLv7M1vF.js";import{H as D,F as L}from"./Footer-DCpIZeUG.js";import{M as P}from"./Modal-CfsCh9Md.js";import{T as d}from"./TextInput-BovP9wEK.js";import{I as l}from"./InputLabel-BZ32Bizk.js";import{I as o}from"./InputError-CpM9uXzD.js";import"./LanguageSwitcher-Cs8TVv_x.js";import"./transition-CGNw9VQO.js";function J({prefillTitle:v=""}){const{t}=W(),{auth:y}=I().props,[N,m]=c.useState(!1),[p,x]=c.useState(!1),[w,g]=c.useState(""),{data:a,setData:r,post:k,processing:h,errors:i,reset:C}=E({title:v,description:"",location:"",date_time:"",budget:"",category:"general",additional_details:""}),_=async s=>{x(!0),g("");try{return(await j.post(route("moderation.check"),{content:s})).data.is_clean?!0:(g(t("Content violates moderation rules.")),!1)}catch{return!0}finally{x(!1)}},[u,f]=c.useState(!1),M=async()=>{if(a.title){f(!0);try{const s=await j.post(route("missions.ai-rewrite"),{title:a.title,description:a.description});r(n=>({...n,title:s.data.improved_title,description:s.data.improved_description}))}catch{}finally{f(!1)}}},S=async s=>{if(s.preventDefault(),!!await _(a.title+" "+a.description)){if(!y.user){T.post(route("missions.store"),a,{onSuccess:F=>{F.props.flash?.requires_auth&&m(!0)},onError:()=>{}});return}k(route("missions.store"),{onSuccess:()=>C()})}};return e.jsxs("div",{className:"min-h-screen bg-off-white-bg font-sans",children:[e.jsx(H,{title:t("Create Mission")}),e.jsx(D,{}),e.jsx("main",{className:"max-w-3xl mx-auto py-16 px-6",children:e.jsxs("div",{className:"bg-white rounded-[40px] p-8 md:p-12 shadow-sm border border-gray-border",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl font-black text-primary-black mb-3",children:t("Create your mission")}),e.jsx("p",{className:"text-gray-muted font-bold",children:t("We take care of the rest.")})]}),e.jsxs("form",{onSubmit:S,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"title",value:t("Mission title"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(d,{id:"title",type:"text",value:a.title,className:"w-full",onChange:s=>r("title",s.target.value),placeholder:t("e.g. Need help moving a sofa"),required:!0}),e.jsx(o,{message:i.title||w,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx(l,{htmlFor:"description",value:t("Description"),className:"text-xs uppercase tracking-widest font-black"}),e.jsxs("button",{type:"button",onClick:M,disabled:u,className:"text-[10px] font-black text-gold-accent uppercase tracking-widest hover:underline disabled:opacity-50 flex items-center gap-2",children:[u&&e.jsx("span",{className:"w-3 h-3 border-2 border-gold-accent border-t-transparent rounded-full animate-spin"}),"âœ¨ ",t(u?"Writing...":"Help me write")]})]}),e.jsx("textarea",{id:"description",value:a.description,className:"w-full bg-off-white-bg border-gray-border rounded-[24px] p-5 text-sm font-medium focus:border-gold-accent focus:ring-0 min-h-[150px] transition-all",onChange:s=>r("description",s.target.value),placeholder:t("Provide more details about your mission...")}),e.jsx(o,{message:i.description,className:"mt-2"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"location",value:t("Location"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(d,{id:"location",type:"text",value:a.location,className:"w-full",onChange:s=>r("location",s.target.value),placeholder:t("City or ZIP code")}),e.jsx(o,{message:i.location,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"date_time",value:t("Date & Time"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(d,{id:"date_time",type:"datetime-local",value:a.date_time,className:"w-full",onChange:s=>r("date_time",s.target.value)}),e.jsx(o,{message:i.date_time,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"budget",value:t("Budget"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"budget",type:"number",value:a.budget,className:"w-full pl-12",onChange:s=>r("budget",s.target.value),placeholder:"0.00"}),e.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 font-black text-gray-muted",children:"CHF"})]}),e.jsx(o,{message:i.budget,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"category",value:t("Category"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsxs("select",{id:"category",value:a.category,className:"w-full bg-off-white-bg border-gray-border rounded-full px-6 py-3.5 text-sm font-bold text-primary-black focus:border-gold-accent focus:ring-0 appearance-none",onChange:s=>r("category",s.target.value),children:[e.jsx("option",{value:"general",children:t("General Help")}),e.jsx("option",{value:"home_improvement",children:t("Home Improvement & DIY")}),e.jsx("option",{value:"cleaning",children:t("Cleaning & Organization")}),e.jsx("option",{value:"moving",children:t("Moving & Lifting")}),e.jsx("option",{value:"gardening",children:t("Gardening & Outdoor")}),e.jsx("option",{value:"pets",children:t("Pet Care")}),e.jsx("option",{value:"tech",children:t("Tech & IT Support")}),e.jsx("option",{value:"education",children:t("Education & Tutoring")}),e.jsx("option",{value:"events",children:t("Events & Photography")}),e.jsx("option",{value:"wellness",children:t("Wellness & Beauty")}),e.jsx("option",{value:"admin",children:t("Admin & Business")}),e.jsx("option",{value:"delivery",children:t("Delivery & Errands")})]}),e.jsx(o,{message:i.category,className:"mt-2"})]})]}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",disabled:h||p,className:"w-full py-5 bg-primary-black text-white font-black rounded-full hover:bg-black transition-all shadow-xl text-lg flex items-center justify-center gap-3 active:scale-[0.98]",children:h||p?e.jsx("span",{className:"w-6 h-6 border-4 border-gold-accent border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:["ðŸš€ ",t("Submit Mission")]})})})]})]})}),e.jsx(L,{}),e.jsx(P,{show:N,onClose:()=>m(!1),children:e.jsxs("div",{className:"p-10 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-cream-accent rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-lg",children:e.jsx("span",{className:"text-4xl",children:"ðŸ”"})}),e.jsx("h2",{className:"text-2xl font-black text-primary-black mb-4",children:t("One last step")}),e.jsx("p",{className:"text-gray-muted font-bold mb-10 leading-relaxed",children:t("Please log in or sign up to finalize your mission. We have saved your progress!")}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(b,{href:route("login"),className:"w-full py-4 bg-gold-accent text-primary-black font-black rounded-full hover:opacity-90 transition-all shadow-md",children:t("Log in")}),e.jsx(b,{href:route("register"),className:"w-full py-4 bg-white border-2 border-gray-border text-primary-black font-black rounded-full hover:bg-off-white-bg transition-all",children:t("Sign up for free")})]}),e.jsx("button",{onClick:()=>m(!1),className:"mt-8 text-xs font-black text-gray-muted uppercase tracking-widest hover:text-primary-black transition-colors",children:t("Close")})]})})]})}export{J as default};
