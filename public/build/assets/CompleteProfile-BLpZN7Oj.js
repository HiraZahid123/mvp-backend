import{b as M,a as l,u as R,j as e,H}from"./app-DqP4OVY8.js";import{u as T,G as U,A as B,C as q}from"./AdvancedMarker-pWsQm5bX.js";import{u as G}from"./useTranslation-C26tRKoX.js";import{A as W}from"./AuthSplitLayout-CZ6sSYzi.js";import{T as g}from"./TextInput-Csvqmdts.js";import{I as d}from"./InputLabel-s5odfMCn.js";import{P as Y}from"./PrimaryButton-BfGmvQh3.js";import{I as h}from"./InputError-CS9Vfv5r.js";import{B as K}from"./BackButton-LZInZIk7.js";const J=["places"];function re(){const{user:f}=M().props,{t}=G(),m=l.useRef(null),[k,N]=l.useState(f?.avatar||"/images/avatars/default-avatar.svg"),[b,Q]=l.useState({lat:40.7128,lng:-74.006}),[n,_]=l.useState(null),[p,C]=l.useState(5),{isLoaded:w,loadError:L}=T({googleMapsApiKey:"AIzaSyAaeyO3ffYCdUpAHU0kQx3TsHGhlbaIgkA",libraries:J}),{data:u,setData:s,post:A,processing:I,errors:r}=R({name:f?.name||"",zip_code:"",location_address:"",location_lat:null,location_lng:null,discovery_radius_km:25,avatar:null}),z=a=>{const o=a.target.files[0];o&&(s("avatar",o),N(URL.createObjectURL(o)))},j=l.useCallback(a=>{const o=a.latLng.lat(),c=a.latLng.lng();_({lat:o,lng:c}),s(v=>({...v,location_lat:o,location_lng:c})),window.google&&window.google.maps&&new window.google.maps.Geocoder().geocode({location:{lat:o,lng:c}},(x,D)=>{if(D==="OK"&&x[0]){const F=x[0].address_components;let y="";for(const i of F)if(i.types.includes("postal_code")){y=i.long_name;break}s(i=>({...i,location_lat:o,location_lng:c,location_address:x[0].formatted_address,zip_code:y||i.zip_code}))}})},[s]),P=a=>{C(a),s("discovery_radius_km",a)},S=a=>{a.preventDefault(),A(route("auth.complete-profile"))},E={width:"100%",height:"240px",borderRadius:"1.5rem"},O={strokeColor:"#D4AF37",strokeOpacity:.8,strokeWeight:2,fillColor:"#D4AF37",fillOpacity:.1,clickable:!1,radius:p*1e3,center:n||b};return e.jsxs(W,{heroImage:"/images/illustrations/basic-profile.svg",heroHeading:t("Welcome"),heroSubtext:t("Oflem makes life easy by connecting people to hire help or earn money by completing tasks quickly and reliably."),bgAccentClass:"bg-cream-accent",children:[e.jsx(H,{title:t("Complete Profile")}),e.jsxs("div",{className:"mb-8 lg:mb-10 text-center lg:text-left relative",children:[e.jsx(K,{href:route("auth.select-role"),className:"absolute -top-12 left-0"}),e.jsx("h2",{className:"text-lg font-medium text-oflem-charcoal mb-1",children:t("Promise, this is the last thing")}),e.jsx("h1",{className:"text-[32px] lg:text-[40px] font-black text-oflem-charcoal tracking-tight mb-2",children:t("Just your area. After that, Oflem handles it.")}),e.jsxs("div",{className:"flex flex-col items-center w-full mt-6 mb-2",children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-100 border-2 border-white shadow-sm overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:k,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsx("button",{type:"button",onClick:()=>m.current.click(),className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-md flex items-center justify-center border border-gray-border overflow-hidden hover:bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light transition-colors group",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("input",{type:"file",ref:m,className:"hidden",accept:"image/*",onChange:z})]}),e.jsx("button",{type:"button",onClick:()=>m.current.click(),className:"text-xs font-black text-gray-muted hover:text-oflem-charcoal transition-colors",children:t("Edit Profile")})]})]}),e.jsxs("form",{onSubmit:S,className:"space-y-5 pb-8",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(d,{htmlFor:"name",value:t("Full Name")}),e.jsx(g,{id:"name",type:"text",value:u.name,onChange:a=>s("name",a.target.value),placeholder:t("Enter Your Name"),autoComplete:"name",required:!0}),e.jsx(h,{message:r.name})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(d,{htmlFor:"zip_code",value:t("ZIP Code")}),e.jsx(g,{id:"zip_code",type:"text",value:u.zip_code,onChange:a=>s("zip_code",a.target.value),placeholder:t("e.g. 10001"),required:!0}),e.jsx(h,{message:r.zip_code})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(d,{htmlFor:"location_address",value:t("Location")}),e.jsx(g,{id:"location_address",type:"text",value:u.location_address,onChange:a=>s("location_address",a.target.value),placeholder:t("New York City, USA"),required:!0}),e.jsx(h,{message:r.location_address})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center px-4",children:[e.jsxs("div",{children:[e.jsx(d,{value:t("Radius"),className:"ml-0"}),e.jsx("p",{className:"text-[10px] text-gray-muted font-bold",children:t("Pick a radius to make tasking easier")})]}),e.jsxs("span",{className:"text-sm font-black text-oflem-charcoal",children:[p," km"]})]}),e.jsx("div",{className:"px-4",children:e.jsx("input",{type:"range",min:"1",max:"50",value:p,onChange:a=>P(parseInt(a.target.value)),className:"w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-oflem-terracotta"})}),e.jsx("div",{className:"rounded-[24px] overflow-hidden border border-gray-border relative mx-4",children:w?e.jsx(U,{mapContainerStyle:E,center:n||b,zoom:11,onClick:j,options:{disableDefaultUI:!0,zoomControl:!1,mapId:"DEMO_MAP_ID",styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f5f5f5"}]}]},children:n&&e.jsxs(e.Fragment,{children:[e.jsx(B,{position:n,draggable:!0,onDragEnd:j}),e.jsx(q,{center:n,options:O})]})}):e.jsx("div",{className:"w-full h-[240px] bg-gray-100 flex items-center justify-center italic text-gray-400",children:t(L?"Error loading maps":"Loading map...")})})]}),r.general&&e.jsx("p",{className:"text-red-500 text-sm font-bold text-center",children:r.general}),r.avatar&&e.jsx("p",{className:"text-red-500 text-sm font-bold text-center",children:r.avatar}),e.jsx("div",{className:"pt-4",children:e.jsx(Y,{className:"w-full",disabled:I,children:t("Complete Profile")})})]})]})}export{re as default};
