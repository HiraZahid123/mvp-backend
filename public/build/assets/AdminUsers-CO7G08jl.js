import{a as m,u as h,j as e,r as o}from"./app-fvf1-USB.js";import{A as p}from"./AdminLayout-D6Tw5_cO.js";import{m as b}from"./Header-DhZlfYUr.js";import"./useTranslation-CglBeK-u.js";import"./transition-CFS7cLri.js";function N({users:t,stats:l,filters:r}){const[n,x]=m.useState(r.search||""),c=h({suspend:!1,reason:""}),i=s=>{s.preventDefault(),o.get("/admin/users",{search:n,role:r.role})},d=(s,a)=>{confirm(`Are you sure you want to ${a?"suspend":"unsuspend"} this user?`)&&(c.setData({suspend:a,reason:a?"Suspended by admin":""}),c.post(`/admin/users/${s.id}/suspend`))};return e.jsx(p,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-5xl font-black text-oflem-charcoal",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage platform users"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow",children:[e.jsx("p",{className:"text-sm font-bold text-gray-500",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-black",children:l.total})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow",children:[e.jsx("p",{className:"text-sm font-bold text-gray-500",children:"Customers"}),e.jsx("p",{className:"text-3xl font-black text-blue-600",children:l.customers})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow",children:[e.jsx("p",{className:"text-sm font-bold text-gray-500",children:"Performers"}),e.jsx("p",{className:"text-3xl font-black text-green-600",children:l.performers})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow",children:[e.jsx("p",{className:"text-sm font-bold text-gray-500",children:"Admins"}),e.jsx("p",{className:"text-3xl font-black text-oflem-terracotta",children:l.admins})]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:e.jsxs("form",{onSubmit:i,className:"flex space-x-4",children:[e.jsx("input",{type:"text",value:n,onChange:s=>x(s.target.value),placeholder:"Search by name, email, username, or phone...",className:"flex-1 px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-oflem-terracotta outline-none"}),e.jsxs("select",{value:r.role,onChange:s=>o.get("/admin/users",{search:n,role:s.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-oflem-terracotta outline-none",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"customer",children:"Customer"}),e.jsx("option",{value:"performer",children:"Performer"}),e.jsx("option",{value:"both",children:"Both"})]}),e.jsx("button",{type:"submit",className:"bg-oflem-terracotta hover:bg-opacity-90 text-white px-8 py-3 rounded-xl font-bold transition-all",children:"Search"})]})}),e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-oflem-charcoal text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Missions"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Balance"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Joined"}),e.jsx("th",{className:"px-6 py-4 text-left font-black",children:"Actions"})]})}),e.jsx("tbody",{children:t.data.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.email}),s.username&&e.jsxs("p",{className:"text-xs text-gray-500",children:["@",s.username]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-oflem-terracotta text-white",children:s.role_type})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{children:["Created: ",s.missions_created_count||0]}),e.jsxs("p",{children:["Assigned: ",s.missions_assigned_count||0]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-black text-green-600",children:["CHF ",parseFloat(s.balance||0).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex space-x-2",children:s.chat_suspended_until?e.jsx("button",{onClick:()=>d(s,!1),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-bold text-sm transition-all",children:"Unsuspend"}):e.jsx("button",{onClick:()=>d(s,!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-xl font-bold text-sm transition-all",children:"Suspend"})})})]},s.id))})]})}),t.links&&e.jsxs("div",{className:"px-6 py-4 border-t flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",t.from," to ",t.to," of ",t.total," results"]}),e.jsx("div",{className:"flex space-x-2",children:t.links.map((s,a)=>e.jsx("button",{onClick:()=>s.url&&o.get(s.url),disabled:!s.url,className:`px-4 py-2 rounded-xl font-bold text-sm transition-all ${s.active?"bg-oflem-terracotta text-white":s.url?"bg-gray-200 hover:bg-gray-300 text-gray-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},a))})]})]})]})})}export{N as default};
