import{r as p,u as k,j as e,H as N,c as _}from"./app-CSj48lUn.js";import{u as F}from"./useTranslation-CLv7M1vF.js";import{H as S,F as z}from"./Footer-DCpIZeUG.js";import{I as i}from"./InputLabel-BZ32Bizk.js";import{I as c}from"./InputError-CpM9uXzD.js";import"./LanguageSwitcher-Cs8TVv_x.js";function T({existingProfile:l=null}){const{t:s}=F(),[n,x]=p.useState(l?2:1),[b,u]=p.useState(!1),[y,d]=p.useState(""),{data:t,setData:o,post:f,processing:g,errors:m}=k({description:"",bio:l?.bio||"",years_experience:l?.years_experience||0,main_category:l?.main_category||"",skills:l?.skills?.map(a=>({name:a.name,proficiency:a.pivot?.proficiency_level||"intermediate"}))||[],raw_analysis:l?.raw_ai_analysis||null}),h=async()=>{if(!t.description||t.description.length<20){d(s("Please provide more details (min 20 chars)."));return}u(!0),d("");try{const r=(await _.post(route("onboarding.analyze"),{description:t.description})).data;o(w=>({...w,bio:r.professional_bio||"",years_experience:r.years_experience||0,main_category:r.main_category||"General",skills:r.skills||[],raw_analysis:r})),x(2)}catch(a){d(s("Failed to analyze. Please try again or fill manually.")),console.error(a)}finally{u(!1)}},j=a=>{a.preventDefault(),f(route("onboarding.store"))},v=a=>{const r=[...t.skills];r.splice(a,1),o("skills",r)};return e.jsxs("div",{className:"min-h-screen bg-off-white-bg font-sans",children:[e.jsx(N,{title:s("Provider Onboarding")}),e.jsx(S,{}),e.jsx("main",{className:"max-w-3xl mx-auto py-16 px-6",children:e.jsxs("div",{className:"bg-white rounded-[40px] p-8 md:p-12 shadow-sm border border-gray-border",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl font-black text-primary-black mb-3",children:s(n===1?"Tell us about your expertise":"Review your profile")}),e.jsx("p",{className:"text-gray-muted font-bold",children:s(n===1?"Our AI will analyze your skills to match you with the right missions.":"We extracted this from your description. Does it look correct?")})]}),n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"description",value:s("Describe your services & experience"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("textarea",{id:"description",value:t.description,onChange:a=>o("description",a.target.value),className:"w-full bg-off-white-bg border-gray-border rounded-[24px] p-5 text-sm font-medium focus:border-gold-accent focus:ring-0 min-h-[200px] transition-all",placeholder:s("Example: I have been a carpenter for 10 years, specializing in custom furniture and repairs. I also have experience with painting and drywall...")}),e.jsx(c,{message:y,className:"mt-2"})]}),e.jsx("button",{onClick:h,disabled:b,className:"w-full py-5 bg-gold-accent text-primary-black font-black rounded-full hover:opacity-90 transition-all shadow-md text-lg flex items-center justify-center gap-3",children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-6 h-6 border-4 border-primary-black border-t-transparent rounded-full animate-spin"}),s("Analyzing...")]}):e.jsxs(e.Fragment,{children:["✨ ",s("Analyze Profile")]})})]}),n===2&&e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"bio",value:s("Professional Bio"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("textarea",{id:"bio",value:t.bio,onChange:a=>o("bio",a.target.value),className:"w-full bg-off-white-bg border-gray-border rounded-[24px] p-5 text-sm font-medium focus:border-gold-accent focus:ring-0 min-h-[100px]"}),e.jsx(c,{message:m.bio,className:"mt-2"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"years",value:s("Years of Experience"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("input",{type:"number",id:"years",value:t.years_experience,onChange:a=>o("years_experience",a.target.value),className:"w-full bg-off-white-bg border-gray-border rounded-full px-6 py-4 text-sm font-bold focus:border-gold-accent focus:ring-0"}),e.jsx(c,{message:m.years_experience,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"category",value:s("Main Category"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("input",{type:"text",id:"category",value:t.main_category,onChange:a=>o("main_category",a.target.value),className:"w-full bg-off-white-bg border-gray-border rounded-full px-6 py-4 text-sm font-bold focus:border-gold-accent focus:ring-0"}),e.jsx(c,{message:m.main_category,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(i,{value:s("Extracted Skills"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsxs("div",{className:"bg-off-white-bg rounded-[24px] p-6 border border-gray-border min-h-[100px] flex flex-wrap gap-3",children:[t.skills.map((a,r)=>e.jsxs("div",{className:"bg-white border border-gray-border px-4 py-2 rounded-full flex items-center gap-2 shadow-sm",children:[e.jsx("span",{className:"font-bold text-sm text-primary-black",children:a.name}),e.jsx("span",{className:`text-[10px] uppercase font-black px-2 py-0.5 rounded-full ${a.proficiency==="expert"?"bg-gold-accent text-primary-black":a.proficiency==="beginner"?"bg-gray-200 text-gray-500":"bg-blue-100 text-blue-600"}`,children:a.proficiency}),e.jsx("button",{type:"button",onClick:()=>v(r),className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center hover:bg-red-500 hover:text-white transition-colors",children:"×"})]},r)),t.skills.length===0&&e.jsx("p",{className:"text-gray-muted text-sm italic",children:s("No skills detected. Try adding more detail to your description.")})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>x(1),className:"flex-1 py-4 bg-white border-2 border-gray-border text-primary-black font-black rounded-full hover:bg-off-white-bg transition-all",children:s("Back")}),e.jsx("button",{type:"submit",disabled:g,className:"flex-1 py-4 bg-primary-black text-white font-black rounded-full hover:bg-black transition-all shadow-xl",children:s(g?"Saving...":"Complete Profile")})]})]})]})}),e.jsx(z,{})]})}export{T as default};
