import{a,j as e,u as f,H as g}from"./app-DD0FtuOd.js";import{A as v}from"./AuthSplitLayout-C5YyCNoI.js";import{I as b}from"./InputLabel-C-NDJzlT.js";import{T as j}from"./TextInput-ThwHn_c-.js";import{u as y}from"./useTranslation-wqa5UC8L.js";import{I as x}from"./InputError-CDMqZeRr.js";import{P as w}from"./PrimaryButton-D-A2Or-B.js";import{B as N}from"./BackButton-DiLgEib8.js";function C({title:s,titleId:n,...i},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},i),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const k=a.forwardRef(C);function E({value:s,onChange:n,previewUrl:i}){const{t:o}=y(),c=a.useRef(null),[d,u]=a.useState(i||null),m=l=>{const r=l.target.files[0];if(r){n(r);const h=new FileReader;h.onloadend=()=>{u(h.result)},h.readAsDataURL(r)}},p=()=>{c.current?.click()};return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{onClick:p,className:"relative w-32 h-32 rounded-full overflow-hidden border-4 border-gray-border/30 cursor-pointer group hover:border-gold-accent transition-all duration-300",children:[d?e.jsx("img",{src:d,alt:"Profile preview",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gold-accent/20 to-gold-accent/5 flex items-center justify-center",children:e.jsx("img",{src:"/images/branding/oflem-placeholder.svg",alt:"OFLEM placeholder",className:"w-16 h-16 opacity-40 group-hover:opacity-60 transition-opacity duration-300",onError:l=>{l.target.style.display="none",l.target.parentElement.innerHTML=`
                                    <svg class="w-16 h-16 text-gray-muted/40" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                                    </svg>
                                `}})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsx(k,{className:"w-8 h-8 text-white"})})]}),e.jsx("button",{type:"button",onClick:p,className:`\r
                    px-6 py-2.5 \r
                    bg-white border-2 border-gray-border/50\r
                    rounded-[24px]\r
                    text-sm font-bold text-primary-black\r
                    hover:border-gold-accent hover:bg-gold-accent/5\r
                    transition-all duration-300\r
                `,children:o("Choisir une photo")}),e.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:m,className:"hidden"}),e.jsx("p",{className:"text-xs text-gray-muted text-center max-w-xs",children:o("Optionnel • Une photo multiplie vos opportunités")})]})}function _({user:s}){const[n,i]=a.useState(null),{data:o,setData:c,post:d,processing:u,errors:m}=f({username:s?.username||"",profile_photo:null}),p=r=>{i(r),c("profile_photo",r)},l=r=>{r.preventDefault(),d(route("auth.complete-identity.store"),{forceFormData:!0})};return e.jsxs(v,{heroImage:"/images/illustrations/verify-email.svg",bgAccentClass:"bg-cream-accent",children:[e.jsx(g,{title:"Profil"}),e.jsx("div",{className:"flex items-center mb-8",children:e.jsx(N,{href:route("auth.select-role"),className:"text-sm",children:t("Back")})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-[32px] lg:text-[40px] font-serif font-bold text-primary-black tracking-tight mb-3 leading-tight",children:["Enchanté !",e.jsx("br",{}),"Comment doit-on vous appeler ?"]}),e.jsxs("p",{className:"text-gray-muted text-base font-medium px-4",children:["Pseudo autorisé pour les discrets.",e.jsx("br",{}),"Une photo multiplie les opportunités, mais c'est vous qui décidez."]})]}),e.jsxs("form",{onSubmit:l,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(E,{value:n,onChange:p,previewUrl:s?.profile_photo_url}),e.jsx(x,{message:m.profile_photo,className:"mt-2 text-center"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(b,{htmlFor:"username",value:"Nom d'affichage",className:"text-center lg:text-left"}),e.jsx(j,{id:"username",type:"text",value:o.username,onChange:r=>c("username",r.target.value),placeholder:"Comment voulez-vous être appelé ?",autoComplete:"nickname",required:!0}),e.jsx(x,{message:m.username})]}),e.jsx(w,{className:"w-full",disabled:u||!o.username,processing:u,children:t("Continuer")})]}),e.jsx("div",{className:"mt-6 p-4 bg-gold-accent/5 rounded-[24px] border border-gold-accent/20",children:e.jsx("p",{className:"text-xs text-gray-muted text-center",children:"Vos informations restent privées et sécurisées."})})]})}export{_ as default};
