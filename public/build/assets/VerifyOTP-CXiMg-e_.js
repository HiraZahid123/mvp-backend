import{b as M,a as c,u as B,j as e,H as E,c as I}from"./app-DGZpcoEf.js";import{u as P}from"./useTranslation-B70rtC_o.js";import{A as R}from"./AuthSplitLayout-oYn8_3T4.js";import{P as k}from"./PrimaryButton-giitCT6x.js";import{I as T}from"./InputError-BL3f_Rmu.js";import{B as V}from"./BackButton-OnfizYfR.js";function J(){const{t:r}=P(),{email:h="",phone:x=""}=M().props,[l,u]=c.useState(30),[A,p]=c.useState(!1),[n,i]=c.useState(!1),[a,m]=c.useState(null),[f,g]=c.useState(["","","","","",""]),{data:w,setData:b,post:C,processing:j,errors:S,reset:H}=B({code:""});c.useEffect(()=>{if(n&&l>0){const t=setInterval(()=>u(o=>o-1),1e3);return()=>clearInterval(t)}else l===0&&p(!0)},[n,l]);const v=t=>{const o=Math.floor(t/60),s=t%60;return`${o}:${s.toString().padStart(2,"0")}`},y=t=>{m(t),i(!0),u(30),p(!1),I.post(route("auth.verify-otp.send"),{method:t}).catch(()=>i(!1))},$=t=>{t.preventDefault();const o=t.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(!o)return;const s=[...f];for(let d=0;d<o.length;d++)s[d]=o[d];g(s),b("code",s.join(""));const L=Math.min(o.length,5),N=document.getElementById(`otp-${L}`);N&&N.focus()},O=(t,o)=>{if(isNaN(t))return;const s=[...f];s[o]=t,g(s),b("code",s.join("")),t&&o<5&&document.getElementById(`otp-${o+1}`).focus()},D=t=>{t.preventDefault(),C(route("auth.verify-otp"))};return e.jsxs(R,{heroImage:n?"/images/illustrations/otp-verify.svg":"/images/illustrations/otp-selection.svg",bgAccentClass:"bg-cream-accent",children:[e.jsx(E,{title:r("Verify OTP")}),e.jsxs("div",{className:"mb-8 lg:mb-10 text-center lg:text-left relative",children:[e.jsx(V,{href:n?"#":route("login"),onClick:n?t=>{t.preventDefault(),i(!1)}:void 0,className:"absolute -top-12 left-0"}),e.jsx("h2",{className:"text-lg font-medium text-oflem-charcoal mb-1",children:r("Oflem")}),e.jsx("h1",{className:"text-[32px] lg:text-[40px] font-black text-oflem-charcoal tracking-tight mb-2",children:r(n?"Almost done":"One small code to go")}),e.jsx("p",{className:"text-gray-muted text-sm font-medium",children:r(n?"Enter the code received by email.":"We'll send you a code by email to continue.")})]}),e.jsx("div",{className:"space-y-6",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-oflem-charcoal font-black text-center",children:a==="email"?h:x})}),e.jsxs("form",{onSubmit:D,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-black text-oflem-charcoal block text-center",children:r("Enter the code received by email.")}),e.jsx("div",{className:"flex justify-between gap-1 sm:gap-2 max-w-sm mx-auto",children:f.map((t,o)=>e.jsx("input",{id:`otp-${o}`,type:"text",maxLength:"1",value:t,onChange:s=>O(s.target.value,o),onPaste:$,className:"w-10 h-10 sm:w-12 sm:h-12 text-center text-xl font-black bg-input-bg border border-gray-border focus:ring-1 focus:ring-oflem-terracotta focus:border-oflem-terracotta rounded-full outline-none transition-all"},o))})]}),e.jsx(T,{message:S.code,className:"text-center ml-0"}),e.jsx(k,{type:"submit",disabled:j||w.code.length!==6,processing:j,className:"w-full",children:r("Verify Code")}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"text-gray-muted",children:r("Didn't receive code?")}),e.jsx("button",{type:"button",onClick:()=>y(a),disabled:l>0,className:`font-black transition-colors ${l>0?"text-gray-400 cursor-not-allowed":"text-oflem-charcoal underline hover:text-oflem-terracotta"}`,children:l>0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"hidden lg:inline",children:[r("Resend Code in")," ",v(l)]}),e.jsxs("span",{className:"lg:hidden",children:[r("Resend in")," ",v(l)]})]}):r("Resend Code")})]})}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"text-xs text-gray-muted font-black hover:text-oflem-charcoal transition-colors",children:r("Change Method")})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{onClick:()=>m("email"),className:`p-5 bg-white border rounded-[24px] cursor-pointer transition-all flex items-center justify-between group ${a==="email"?"border-oflem-terracotta ring-1 ring-oflem-terracotta":"border-gray-border hover:border-oflem-terracotta"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cream-accent flex items-center justify-center text-oflem-terracotta transition-colors group-hover:bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light group-hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-oflem-charcoal",children:r("Send code to email :")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:h})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${a==="email"?"border-oflem-terracotta":"border-gray-border group-hover:border-oflem-terracotta"}`,children:e.jsx("div",{className:`w-3 h-3 rounded-full transition-colors ${a==="email"?"bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light":"bg-transparent"}`})})]}),e.jsxs("div",{onClick:()=>m("phone"),className:`p-5 bg-white border rounded-[24px] cursor-pointer transition-all flex items-center justify-between group ${a==="phone"?"border-oflem-terracotta ring-1 ring-oflem-terracotta":"border-gray-border hover:border-oflem-terracotta"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-cream-accent flex items-center justify-center text-oflem-terracotta transition-colors group-hover:bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light group-hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-oflem-charcoal",children:r("Send code to phone number :")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:x})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${a==="phone"?"border-oflem-terracotta":"border-gray-border group-hover:border-oflem-terracotta"}`,children:e.jsx("div",{className:`w-3 h-3 rounded-full transition-colors ${a==="phone"?"bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light":"bg-transparent"}`})})]}),e.jsx(k,{onClick:()=>y(a),disabled:!a,processing:!1,className:"w-full mt-6",children:r("Verify Account")})]})})]})}export{J as default};
