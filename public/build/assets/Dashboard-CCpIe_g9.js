import{b as L,a as i,c as p,j as e,H as D,L as n}from"./app-CndbTHDq.js";import{A as S}from"./AuthenticatedLayout-Beg72nQC.js";import{u as M}from"./useTranslation-BxDjp-hW.js";import"./Header-CnEZIWpy.js";import"./transition-DUAn2XKW.js";import"./Footer-Bcof6cg9.js";function T({chat:s,onClose:r}){const{t:a}=M(),{auth:o}=L().props,[m,h]=i.useState([]),[c,u]=i.useState(""),[b,g]=i.useState(!1),[d,f]=i.useState([]),k=i.useRef(null),j=i.useRef(null);i.useEffect(()=>(p.get(route("api.chats.messages",s.id)).then(t=>{h(t.data)}),window.Echo.join(`chat.${s.id}`).here(t=>{}).joining(t=>{}).leaving(t=>{f(l=>l.filter(x=>x.id!==t.id))}).listen(".message.sent",t=>{h(l=>[...l,t.message])}).listen(".typing.indicator",t=>{t.userId!==o.user.id&&(t.isTyping?f(l=>[...l.filter(x=>x.id!==t.userId),{id:t.userId,name:t.userName}]):f(l=>l.filter(x=>x.id!==t.userId)))}),()=>{window.Echo.leave(`chat.${s.id}`)}),[s.id]),i.useEffect(()=>{k.current?.scrollIntoView({behavior:"smooth"})},[m,d]);const C=t=>{if(t.preventDefault(),!c.trim())return;const l=c;u(""),v(!1),p.post(route("api.chats.messages.store",s.id),{content:l}).then(x=>{}).catch(x=>{console.error("Failed to send message",x)})},v=t=>{b!==t&&(g(t),p.post(route("api.chats.typing",s.id),{is_typing:t})),t&&(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{v(!1)},3e3))};return e.jsxs("div",{className:"fixed bottom-6 right-6 w-96 h-[500px] bg-white rounded-[32px] shadow-2xl border border-gray-border flex flex-col z-[100] overflow-hidden animate-in slide-in-from-bottom-10 duration-500",children:[e.jsxs("div",{className:"p-5 bg-primary-black text-white flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gold-accent flex items-center justify-center text-primary-black font-black text-xs",children:s.mission?.title.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black truncate max-w-[180px]",children:s.mission?.title}),e.jsx("p",{className:"text-[10px] text-gray-muted font-bold tracking-widest uppercase",children:a("Chatting")})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-oflem-cream",children:[m.map(t=>t.user_id===null||t.is_system?e.jsx("div",{className:"flex justify-center my-2",children:e.jsx("div",{className:"bg-cream-accent/50 border border-gold-accent/20 px-4 py-2 rounded-2xl text-[11px] font-bold text-primary-black/60 text-center max-w-[90%]",children:t.content})},t.id):e.jsx("div",{className:`flex ${t.user_id===o.user.id?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-4 rounded-[20px] text-sm font-medium ${t.user_id===o.user.id?"bg-primary-black text-white rounded-br-sm":"bg-white text-primary-black border border-gray-border rounded-bl-sm shadow-sm"}`,children:[e.jsx("p",{children:t.content}),e.jsx("span",{className:"text-[9px] opacity-40 mt-1 block text-right",children:new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},t.id)),d.length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"bg-white border border-gray-border px-4 py-2 rounded-full shadow-sm text-[10px] font-bold text-gray-muted flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),e.jsx("span",{className:"w-1 h-1 bg-gold-accent rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),e.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]}),d[0].name," ",a("is typing...")]})}),e.jsx("div",{ref:k})]}),e.jsx("form",{onSubmit:C,className:"p-4 bg-white border-t border-gray-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:t=>{u(t.target.value),v(!0)},placeholder:a("Type a message..."),className:"flex-1 bg-oflem-cream border-none rounded-full px-5 py-3 text-sm font-medium focus:ring-2 focus:ring-gold-accent transition-all"}),e.jsx("button",{type:"submit",disabled:!c.trim(),className:"w-10 h-10 bg-primary-black text-white rounded-full flex items-center justify-center hover:bg-black transition-all disabled:opacity-30 shadow-lg",children:e.jsx("svg",{className:"w-5 h-5 ml-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})})]})})]})}function Y({missions:s}){const{t:r}=M(),{auth:a}=L().props,o=a.user,m=new URLSearchParams(window.location.search),h=m.get("chat_with"),c=m.get("mission_id"),[u,b]=i.useState(null);i.useEffect(()=>{h&&c&&p.get(route("api.missions.chat",c)).then(d=>{b(d.data)})},[h,c]);const g=()=>{const d=o.last_selected_role||o.role_type;if(d==="customer")return e.jsx(w,{user:o,missions:s,t:r});if(d==="performer")return e.jsx(N,{user:o,t:r});switch(o.role_type){case"customer":return e.jsx(w,{user:o,missions:s,t:r});case"performer":return e.jsx(N,{user:o,t:r});case"both":return e.jsx(W,{user:o,t:r});default:return e.jsx(E,{user:o,t:r})}};return e.jsxs(S,{header:r("Dashboard"),maxWidth:"max-w-7xl",showFooter:!0,children:[e.jsx(D,{title:r("Dashboard")}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:g()}),u&&e.jsx(T,{chat:u,onClose:()=>b(null)})]})}function w({user:s,missions:r,t:a}){return e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"bg-gold-accent rounded-[32px] p-8 lg:p-12 text-primary-black relative overflow-hidden group",children:[e.jsxs("div",{className:"relative z-10 max-w-2xl",children:[e.jsxs("h3",{className:"text-3xl lg:text-4xl font-black mb-4 leading-tight",children:[a("Need a hand"),", ",s.name.split(" ")[0],"? ü§ù"]}),e.jsx("p",{className:"text-primary-black/70 text-lg font-bold",children:a("Describe your mission and let our smart matching find the perfect helper for you.")}),e.jsxs(n,{href:route("missions.create"),className:"mt-8 bg-primary-black text-white font-black py-4 px-10 rounded-full hover:opacity-90 transition-all shadow-xl inline-block text-lg",children:["üöÄ ",a("Post a Mission")]})]}),e.jsx("div",{className:"absolute top-0 right-0 -mr-10 -mt-10 w-64 h-64 bg-white opacity-20 rounded-full group-hover:scale-110 transition-transform duration-1000"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("h4",{className:"text-xl font-black text-primary-black uppercase tracking-tight",children:a("Your Recent Missions")}),e.jsx(n,{href:"/",className:"text-xs font-black text-gold-accent uppercase tracking-widest hover:underline",children:a("See all")})]}),r&&r.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.slice(0,3).map(o=>e.jsxs("div",{className:"bg-white border border-gray-border rounded-[28px] p-6 hover:shadow-lg transition-all border-b-4 border-b-gold-accent/30 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-cream-accent rounded-xl flex items-center justify-center text-xl",children:"‚ú®"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest bg-oflem-cream px-3 py-1 rounded-full text-gray-muted",children:o.status||"OUVERTE"})]}),e.jsx("h5",{className:"font-black text-primary-black mb-2 line-clamp-1",children:o.title}),e.jsx("p",{className:"text-sm text-gray-muted font-bold line-clamp-2 mb-6",children:o.description||a("No description provided.")}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-border/50",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-muted/50 uppercase",children:new Date(o.created_at).toLocaleDateString()}),e.jsxs(n,{href:route("missions.show",o.id),className:"text-gold-accent font-black text-xs group-hover:translate-x-1 transition-transform",children:[a("View Details")," ‚Üí"]})]})]},o.id))}):e.jsxs("div",{className:"bg-white border border-dashed border-gray-border rounded-[32px] p-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-oflem-cream rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("span",{className:"text-2xl",children:"üìù"})}),e.jsx("p",{className:"text-gray-muted font-bold mb-6",children:a("You haven't posted any missions yet.")}),e.jsx(n,{href:route("missions.create"),className:"text-sm font-black text-primary-black underline hover:text-gold-accent transition-colors",children:a("Start by posting your first mission")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-8 flex items-center gap-6 group hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"w-16 h-16 bg-cream-accent rounded-2xl flex items-center justify-center text-2xl group-hover:bg-gold-accent transition-colors",children:"üîç"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-black text-primary-black mb-1",children:a("How it works")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:a("Learn how to get the most out of Oflem")})]})]}),e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-8 flex items-center gap-6 group hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"w-16 h-16 bg-cream-accent rounded-2xl flex items-center justify-center text-2xl group-hover:bg-gold-accent transition-colors",children:"üõ°Ô∏è"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-black text-primary-black mb-1",children:a("Trust & Safety")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:a("Your security is our top priority")})]})]})]})]})}function N({user:s,t:r}){return e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"bg-primary-black rounded-[32px] p-8 lg:p-12 text-white relative overflow-hidden group",children:[e.jsxs("div",{className:"relative z-10 max-w-2xl",children:[e.jsxs("h3",{className:"text-3xl lg:text-4xl font-black mb-4 leading-tight",children:[r("Welcome back"),", ",s.name.split(" ")[0],"! üíº"]}),e.jsx("p",{className:"text-gray-muted text-lg font-bold",children:r("Ready to showcase your talent and get more bookings? Your skills are in demand.")}),e.jsx(n,{href:route("missions.active"),className:"inline-block",children:e.jsx("button",{className:"mt-8 bg-gold-accent text-primary-black font-black py-3 px-8 rounded-full hover:opacity-90 transition-all shadow-md",children:r("Check Requests")})})]}),e.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-80 h-80 bg-white opacity-5 rounded-full group-hover:scale-110 transition-transform duration-1000"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-border rounded-[24px] p-8 text-center shadow-sm hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"text-4xl font-black text-primary-black mb-2",children:"0"}),e.jsx("div",{className:"text-sm text-gray-muted font-black uppercase tracking-widest px-3 py-1 bg-cream-accent inline-block rounded-full",children:r("Bookings")})]}),e.jsxs("div",{className:"bg-white border border-gray-border rounded-[24px] p-8 text-center shadow-sm hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"text-4xl font-black text-primary-black mb-2",children:"0"}),e.jsx("div",{className:"text-sm text-gray-muted font-black uppercase tracking-widest px-3 py-1 bg-cream-accent inline-block rounded-full",children:r("Reviews")})]}),e.jsxs("div",{className:"bg-white border border-gray-border rounded-[24px] p-8 text-center shadow-sm hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"text-4xl font-black text-primary-black mb-2",children:"$0"}),e.jsx("div",{className:"text-sm text-gray-muted font-black uppercase tracking-widest px-3 py-1 bg-cream-accent inline-block rounded-full",children:r("Earnings")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(n,{href:route("onboarding.index"),className:"block group cursor-pointer",children:e.jsx(y,{title:r("Update Expertise"),subtitle:r("Showcase your skills"),icon:e.jsx(_,{})})}),e.jsx(y,{title:r("Manage Schedule"),subtitle:r("View and edit bookings"),icon:e.jsx(B,{})}),e.jsx(y,{title:r("Payment Settings"),subtitle:r("Setup your payouts"),icon:e.jsx(R,{})})]})]})}function W({user:s,t:r}){return e.jsxs("div",{className:"space-y-10",children:[e.jsx("div",{className:"bg-gradient-to-br from-cream-accent to-white border border-gold-accent/20 rounded-[32px] p-8 lg:p-12 relative overflow-hidden group",children:e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:items-center justify-between gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-3xl lg:text-4xl font-black text-primary-black mb-4 leading-tight",children:[r("Hi")," ",s.name.split(" ")[0],", ",r("Dual Power!")," üöÄ"]}),e.jsx("p",{className:"text-gray-muted text-lg font-bold",children:r("Manage your tasks and bookings all in one place. You're set for both worlds.")})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(n,{href:route("missions.create"),className:"bg-primary-black text-white font-black py-3 px-6 rounded-full hover:opacity-90 transition-all text-sm shadow-md",children:r("Post Task")}),e.jsx("button",{className:"bg-gold-accent text-primary-black font-black py-3 px-8 rounded-full hover:opacity-90 transition-all text-sm shadow-md",children:r("Available Tasks")})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-8",children:[e.jsxs("h4",{className:"text-xl font-black text-primary-black mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-cream-accent flex items-center justify-center transition-colors group-hover:bg-gold-accent",children:e.jsx("svg",{className:"w-4 h-4 text-gold-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),r("As a Customer")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n,{href:route("providers.index"),className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("Find Performers")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]}),e.jsxs("div",{className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("Manage My Tasks")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-8",children:[e.jsxs("h4",{className:"text-xl font-black text-primary-black mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-cream-accent flex items-center justify-center transition-colors group-hover:bg-gold-accent",children:e.jsx("svg",{className:"w-4 h-4 text-gold-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),r("As a Performer")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n,{href:route("missions.active"),className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("Available Tasks")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]}),e.jsxs("div",{className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("My Earning Overview")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]}),e.jsxs(n,{href:route("onboarding.index"),className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("Update My Expertise")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]})]})]})]})]})}function E({user:s,t:r}){return e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-12 text-center max-w-2xl mx-auto mt-20 shadow-sm transition-all hover:shadow-md",children:[e.jsx("h3",{className:"text-3xl font-black text-primary-black mb-4",children:r("Welcome to Oflem!")}),e.jsxs("p",{className:"text-gray-muted text-lg font-bold mb-8",children:[r("You're logged in as")," ",s.name,". ",r("Your account setup is complete.")]}),e.jsx(n,{href:"/",className:"bg-gold-accent text-primary-black font-black py-3 px-8 rounded-full hover:opacity-90 inline-block shadow-md",children:r("Get Started")})]})}function y({title:s,subtitle:r,icon:a}){return e.jsxs("div",{className:"bg-white border border-gray-border rounded-[24px] p-10 hover:shadow-xl hover:border-gold-accent transition-all group cursor-pointer",children:[e.jsx("div",{className:"w-14 h-14 bg-cream-accent rounded-full flex items-center justify-center mb-6 text-gold-accent group-hover:bg-gold-accent group-hover:text-primary-black transition-colors shadow-sm",children:a}),e.jsx("h5",{className:"text-lg font-black text-primary-black mb-1",children:s}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:r})]})}function _(){return e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}function B(){return e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}function R(){return e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}export{Y as default};
