import{a as y,u as h,j as e,H as N,L as k}from"./app-BCZRSgt0.js";import{A as v}from"./AuthenticatedLayout-BWjZmRog.js";import{u as w}from"./useTranslation-Q6xBOp6d.js";import{I as o}from"./InputLabel-D0Wfrmpw.js";import{T as i}from"./TextInput-lZLST2ln.js";import{I as m}from"./InputError-C_Z71CJH.js";import{m as c}from"./Header-BW9rDuWb.js";import{C as _}from"./clock-Db-jOZf3.js";import{c as p}from"./createLucideIcon-ooO1ZpS2.js";import{I as F}from"./inbox-DncrJGHr.js";import"./Footer-CqxkWKQA.js";import"./transition-DEbVv5nb.js";import"./circle-user-5nndWB2d.js";const C=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],H=p("arrow-down-left",C);const M=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],D=p("history",M);function G({balance:W,availableBalance:l,pendingWithdrawal:x,totalWithdrawn:b,transactions:r,pendingWithdrawals:u}){const{t}=w(),[f,n]=y.useState(!1),s=h({amount:"",bank_details:{account_holder:"",iban:"",bank_name:""}}),g=a=>{a.preventDefault(),s.post(route("wallet.withdraw"),{onSuccess:()=>{n(!1),s.reset()}})},j=a=>{confirm(t("Are you sure you want to cancel this withdrawal request?"))&&h().delete(route("wallet.cancel",a))};return e.jsxs(v,{header:t("My Wallet"),maxWidth:"max-w-4xl",showFooter:!0,children:[e.jsx(N,{title:t("My Wallet")}),e.jsx("div",{className:"mb-12",children:e.jsx("p",{className:"text-gray-muted font-bold",children:t("Track your earnings and manage your balance.")})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-12",children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"md:col-span-2 bg-oflem-charcoal rounded-[40px] p-10 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-black uppercase tracking-[0.2em] opacity-60 mb-4",children:t("Available Balance")}),e.jsxs("h2",{className:"text-6xl font-black mb-2",children:[e.jsx("span",{className:"text-oflem-terracotta mr-2",children:"CHF"}),parseFloat(l).toFixed(2)]}),x>0&&e.jsxs("p",{className:"text-sm opacity-75 mb-8",children:[t("Pending Withdrawal"),": CHF ",parseFloat(x).toFixed(2)]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{onClick:()=>n(!0),disabled:l<10,className:"px-8 py-3 bg-white text-oflem-charcoal font-black rounded-full hover:bg-oflem-cream transition-all text-sm shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:t("Withdraw Funds")})}),l<10&&e.jsx("p",{className:"text-xs opacity-60 mt-4",children:t("Minimum withdrawal amount is CHF 10.00")})]}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light/20 rounded-full -mr-20 -mt-20 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-blue-500/10 rounded-full -ml-10 -mb-10 blur-2xl"})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-[40px] p-10 border border-gray-border shadow-sm flex flex-col justify-center",children:[e.jsx("p",{className:"text-xs font-black text-gray-muted uppercase tracking-widest mb-1",children:t("Total Earned")}),e.jsxs("p",{className:"text-2xl font-black text-oflem-charcoal mb-6",children:["CHF ",r.reduce((a,d)=>a+parseFloat(d.performer_amount),0).toFixed(2)]}),e.jsx("p",{className:"text-xs font-black text-gray-muted uppercase tracking-widest mb-1",children:t("Withdrawn")}),e.jsxs("p",{className:"text-2xl font-black text-oflem-charcoal mb-6",children:["CHF ",parseFloat(b).toFixed(2)]}),e.jsx("p",{className:"text-xs font-black text-gray-muted uppercase tracking-widest mb-1",children:t("Missions")}),e.jsx("p",{className:"text-2xl font-black text-oflem-charcoal",children:r.length})]})]}),u.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("h3",{className:"text-xl font-black text-oflem-charcoal flex items-center gap-3 mb-6",children:[e.jsx(_,{className:"text-oflem-terracotta",size:24})," ",t("Pending Withdrawals")]}),e.jsx("div",{className:"bg-white rounded-[40px] border border-gray-border overflow-hidden shadow-sm divide-y divide-gray-border",children:u.map(a=>e.jsxs("div",{className:"p-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-black text-oflem-charcoal mb-1",children:["CHF ",parseFloat(a.amount).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-muted font-bold",children:[t("Requested on")," ",new Date(a.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-4 py-2 text-xs font-black uppercase tracking-widest rounded-full ${a.status==="pending"?"bg-yellow-100 text-yellow-700":a.status==="approved"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:t(a.status)}),a.status==="pending"&&e.jsx("button",{onClick:()=>j(a.id),className:"text-xs font-black text-red-600 hover:text-red-800",children:t("Cancel")})]})]},a.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-black text-oflem-charcoal flex items-center gap-3",children:[e.jsx(D,{className:"text-oflem-terracotta",size:24})," ",t("Transaction History")]}),e.jsx("div",{className:"bg-white rounded-[40px] border border-gray-border overflow-hidden shadow-sm",children:r.length>0?e.jsx("div",{className:"divide-y divide-gray-border",children:r.map((a,d)=>e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},className:"p-8 flex items-center justify-between hover:bg-oflem-cream/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-14 h-14 bg-green-50 text-green-600 rounded-2xl flex items-center justify-center shadow-sm",children:e.jsx(H,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-oflem-charcoal text-lg mb-1",children:a.mission.title}),e.jsxs("p",{className:"text-xs font-bold text-gray-muted uppercase tracking-widest",children:[a.captured_at?new Date(a.captured_at).toLocaleDateString():t("Processing")," â€¢ ",t("Mission ID"),": #",a.mission_id]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xl font-black text-green-600 mb-1",children:["+ CHF ",parseFloat(a.performer_amount).toFixed(2)]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-[10px] font-black uppercase tracking-widest rounded-full",children:t("Captured")})]})]},a.id))}):e.jsxs("div",{className:"p-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-zinc-50 rounded-3xl flex items-center justify-center mx-auto mb-6 text-zinc-300",children:e.jsx(F,{size:48})}),e.jsx("h4",{className:"text-xl font-black text-oflem-charcoal mb-2",children:t("No transactions yet")}),e.jsx("p",{className:"text-gray-muted font-bold max-w-sm mx-auto",children:t("Complete your first mission to start building your balance!")}),e.jsx(k,{href:route("missions.active"),className:"inline-block mt-8 px-8 py-3 bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light text-white font-black rounded-full hover:opacity-90 transition-all text-sm",children:t("Find Missions")})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-[40px] p-10 max-w-md w-full shadow-2xl",children:[e.jsx("h2",{className:"text-2xl font-black text-oflem-charcoal mb-6",children:t("Request Withdrawal")}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"amount",value:t("Amount (CHF)"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(i,{id:"amount",type:"number",step:"0.01",min:"10",max:l,className:"w-full",placeholder:"0.00",value:s.data.amount,onChange:a=>s.setData("amount",a.target.value),required:!0}),e.jsx(m,{message:s.errors.amount,className:"mt-2"}),e.jsxs("p",{className:"text-xs text-gray-muted mt-2",children:[t("Available"),": CHF ",parseFloat(l).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"account_holder",value:t("Account Holder Name"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(i,{id:"account_holder",type:"text",className:"w-full",value:s.data.bank_details.account_holder,onChange:a=>s.setData("bank_details",{...s.data.bank_details,account_holder:a.target.value}),required:!0}),e.jsx(m,{message:s.errors["bank_details.account_holder"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"iban",value:t("IBAN"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(i,{id:"iban",type:"text",className:"w-full",placeholder:"CH93 0076 2011 6238 5295 7",value:s.data.bank_details.iban,onChange:a=>s.setData("bank_details",{...s.data.bank_details,iban:a.target.value}),required:!0}),e.jsx(m,{message:s.errors["bank_details.iban"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"bank_name",value:t("Bank Name (Optional)"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx(i,{id:"bank_name",type:"text",className:"w-full",value:s.data.bank_details.bank_name,onChange:a=>s.setData("bank_details",{...s.data.bank_details,bank_name:a.target.value})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 py-3 bg-gray-200 text-oflem-charcoal font-black rounded-full hover:bg-gray-300 transition-all",children:t("Cancel")}),e.jsx("button",{type:"submit",disabled:s.processing,className:"flex-1 py-3 bg-gradient-to-br from-oflem-terracotta to-oflem-terracotta-light text-white font-black rounded-full hover:opacity-90 transition-all disabled:opacity-50",children:t("Submit Request")})]})]})]})})]})}export{G as default};
