import{b as L,a as n,c as v,j as e,H as f,L as i}from"./app-CQawlfId.js";import{A as j}from"./AuthenticatedLayout-C2x_uR8U.js";import{u as M}from"./useTranslation-Ew-ZoTZw.js";import"./transition-Ct-skzim.js";import"./LanguageSwitcher-Brws5Y8T.js";function C({chat:a,onClose:r}){const{t}=M(),{auth:o}=L().props,[c,x]=n.useState([]),[m,h]=n.useState(""),[p,g]=n.useState(!1),[u,b]=n.useState([]),N=n.useRef(null),y=n.useRef(null);n.useEffect(()=>(v.get(route("api.chats.messages",a.id)).then(s=>{x(s.data)}),window.Echo.join(`chat.${a.id}`).here(s=>{}).joining(s=>{}).leaving(s=>{b(l=>l.filter(d=>d.id!==s.id))}).listen(".message.sent",s=>{x(l=>[...l,s.message])}).listen(".typing.indicator",s=>{s.userId!==o.user.id&&(s.isTyping?b(l=>[...l.filter(d=>d.id!==s.userId),{id:s.userId,name:s.userName}]):b(l=>l.filter(d=>d.id!==s.userId)))}),()=>{window.Echo.leave(`chat.${a.id}`)}),[a.id]),n.useEffect(()=>{N.current?.scrollIntoView({behavior:"smooth"})},[c,u]);const D=s=>{if(s.preventDefault(),!m.trim())return;const l=m;h(""),k(!1),v.post(route("api.chats.messages.store",a.id),{content:l}).then(d=>{}).catch(d=>{console.error("Failed to send message",d)})},k=s=>{p!==s&&(g(s),v.post(route("api.chats.typing",a.id),{is_typing:s})),s&&(y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{k(!1)},3e3))};return e.jsxs("div",{className:"fixed bottom-6 right-6 w-96 h-[500px] bg-white rounded-[32px] shadow-2xl border border-gray-border flex flex-col z-[100] overflow-hidden animate-in slide-in-from-bottom-10 duration-500",children:[e.jsxs("div",{className:"p-5 bg-primary-black text-white flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gold-accent flex items-center justify-center text-primary-black font-black text-xs",children:a.mission?.title.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black truncate max-w-[180px]",children:a.mission?.title}),e.jsx("p",{className:"text-[10px] text-gray-muted font-bold tracking-widest uppercase",children:t("Chatting")})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-oflem-cream",children:[c.map(s=>s.user_id===null||s.is_system?e.jsx("div",{className:"flex justify-center my-2",children:e.jsx("div",{className:"bg-cream-accent/50 border border-gold-accent/20 px-4 py-2 rounded-2xl text-[11px] font-bold text-primary-black/60 text-center max-w-[90%]",children:s.content})},s.id):e.jsx("div",{className:`flex ${s.user_id===o.user.id?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-4 rounded-[20px] text-sm font-medium ${s.user_id===o.user.id?"bg-primary-black text-white rounded-br-sm":"bg-white text-primary-black border border-gray-border rounded-bl-sm shadow-sm"}`,children:[e.jsx("p",{children:s.content}),e.jsx("span",{className:"text-[9px] opacity-40 mt-1 block text-right",children:new Date(s.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},s.id)),u.length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"bg-white border border-gray-border px-4 py-2 rounded-full shadow-sm text-[10px] font-bold text-gray-muted flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),e.jsx("span",{className:"w-1 h-1 bg-gold-accent rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),e.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]}),u[0].name," ",t("is typing...")]})}),e.jsx("div",{ref:N})]}),e.jsx("form",{onSubmit:D,className:"p-4 bg-white border-t border-gray-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:s=>{h(s.target.value),k(!0)},placeholder:t("Type a message..."),className:"flex-1 bg-oflem-cream border-none rounded-full px-5 py-3 text-sm font-medium focus:ring-2 focus:ring-gold-accent transition-all"}),e.jsx("button",{type:"submit",disabled:!m.trim(),className:"w-10 h-10 bg-primary-black text-white rounded-full flex items-center justify-center hover:bg-black transition-all disabled:opacity-30 shadow-lg",children:e.jsx("svg",{className:"w-5 h-5 ml-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})})]})})]})}function H({missions:a}){const{t:r}=M(),{auth:t,ziggy:o}=L().props,c=t.user,x=new URLSearchParams(window.location.search),m=x.get("chat_with");x.get("helper_name");const h=x.get("mission_id");x.get("mission_title");const[p,g]=n.useState(null);n.useEffect(()=>{m&&h&&v.get(route("api.missions.chat",h)).then(b=>{g(b.data)})},[m,h]);const u=()=>{switch(c.role_type){case"customer":return e.jsxs(j,{header:r("Dashboard"),children:[e.jsx(f,{title:r("Dashboard")}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:e.jsx(S,{user:c,missions:a,t:r})})]});case"performer":return e.jsxs(j,{header:r("Dashboard"),children:[e.jsx(f,{title:r("Dashboard")}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:e.jsx(T,{user:c,t:r})})]});case"both":return e.jsxs(j,{header:r("Dashboard"),children:[e.jsx(f,{title:r("Dashboard")}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:e.jsx(W,{user:c,t:r})})]});default:return e.jsxs(j,{header:r("Dashboard"),children:[e.jsx(f,{title:r("Dashboard")}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:e.jsx(E,{user:c,t:r})})]})}};return e.jsxs(e.Fragment,{children:[u(),p&&e.jsx(C,{chat:p,onClose:()=>g(null)})]})}function S({user:a,missions:r,t}){return e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"bg-gold-accent rounded-[32px] p-8 lg:p-12 text-primary-black relative overflow-hidden group",children:[e.jsxs("div",{className:"relative z-10 max-w-2xl",children:[e.jsxs("h3",{className:"text-3xl lg:text-4xl font-black mb-4 leading-tight",children:[t("Need a hand"),", ",a.name.split(" ")[0],"? ü§ù"]}),e.jsx("p",{className:"text-primary-black/70 text-lg font-bold",children:t("Describe your mission and let our smart matching find the perfect helper for you.")}),e.jsxs(i,{href:route("missions.search"),className:"mt-8 bg-primary-black text-white font-black py-4 px-10 rounded-full hover:opacity-90 transition-all shadow-xl inline-block text-lg",children:["üöÄ ",t("Post a Mission")]})]}),e.jsx("div",{className:"absolute top-0 right-0 -mr-10 -mt-10 w-64 h-64 bg-white opacity-20 rounded-full group-hover:scale-110 transition-transform duration-1000"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("h4",{className:"text-xl font-black text-primary-black uppercase tracking-tight",children:t("Your Recent Missions")}),e.jsx(i,{href:"/",className:"text-xs font-black text-gold-accent uppercase tracking-widest hover:underline",children:t("See all")})]}),r&&r.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.slice(0,3).map(o=>e.jsxs("div",{className:"bg-white border border-gray-border rounded-[28px] p-6 hover:shadow-lg transition-all border-b-4 border-b-gold-accent/30 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-cream-accent rounded-xl flex items-center justify-center text-xl",children:"‚ú®"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest bg-oflem-cream px-3 py-1 rounded-full text-gray-muted",children:o.status||"OUVERTE"})]}),e.jsx("h5",{className:"font-black text-primary-black mb-2 line-clamp-1",children:o.title}),e.jsx("p",{className:"text-sm text-gray-muted font-bold line-clamp-2 mb-6",children:o.description||t("No description provided.")}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-border/50",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-muted/50 uppercase",children:new Date(o.created_at).toLocaleDateString()}),e.jsxs(i,{href:route("missions.show",o.id),className:"text-gold-accent font-black text-xs group-hover:translate-x-1 transition-transform",children:[t("View Details")," ‚Üí"]})]})]},o.id))}):e.jsxs("div",{className:"bg-white border border-dashed border-gray-border rounded-[32px] p-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-oflem-cream rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("span",{className:"text-2xl",children:"üìù"})}),e.jsx("p",{className:"text-gray-muted font-bold mb-6",children:t("You haven't posted any missions yet.")}),e.jsx(i,{href:route("missions.create"),className:"text-sm font-black text-primary-black underline hover:text-gold-accent transition-colors",children:t("Start by posting your first mission")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-8 flex items-center gap-6 group hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"w-16 h-16 bg-cream-accent rounded-2xl flex items-center justify-center text-2xl group-hover:bg-gold-accent transition-colors",children:"üîç"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-black text-primary-black mb-1",children:t("How it works")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:t("Learn how to get the most out of Oflem")})]})]}),e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-8 flex items-center gap-6 group hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"w-16 h-16 bg-cream-accent rounded-2xl flex items-center justify-center text-2xl group-hover:bg-gold-accent transition-colors",children:"üõ°Ô∏è"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-black text-primary-black mb-1",children:t("Trust & Safety")}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:t("Your security is our top priority")})]})]})]})]})}function T({user:a,t:r}){return e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"bg-primary-black rounded-[32px] p-8 lg:p-12 text-white relative overflow-hidden group",children:[e.jsxs("div",{className:"relative z-10 max-w-2xl",children:[e.jsxs("h3",{className:"text-3xl lg:text-4xl font-black mb-4 leading-tight",children:[r("Welcome back"),", ",a.name.split(" ")[0],"! üíº"]}),e.jsx("p",{className:"text-gray-muted text-lg font-bold",children:r("Ready to showcase your talent and get more bookings? Your skills are in demand.")}),e.jsx(i,{href:route("missions.active"),className:"inline-block",children:e.jsx("button",{className:"mt-8 bg-gold-accent text-primary-black font-black py-3 px-8 rounded-full hover:opacity-90 transition-all shadow-md",children:r("Check Requests")})})]}),e.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-80 h-80 bg-white opacity-5 rounded-full group-hover:scale-110 transition-transform duration-1000"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-border rounded-[24px] p-8 text-center shadow-sm hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"text-4xl font-black text-primary-black mb-2",children:"0"}),e.jsx("div",{className:"text-sm text-gray-muted font-black uppercase tracking-widest px-3 py-1 bg-cream-accent inline-block rounded-full",children:r("Bookings")})]}),e.jsxs("div",{className:"bg-white border border-gray-border rounded-[24px] p-8 text-center shadow-sm hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"text-4xl font-black text-primary-black mb-2",children:"0"}),e.jsx("div",{className:"text-sm text-gray-muted font-black uppercase tracking-widest px-3 py-1 bg-cream-accent inline-block rounded-full",children:r("Reviews")})]}),e.jsxs("div",{className:"bg-white border border-gray-border rounded-[24px] p-8 text-center shadow-sm hover:border-gold-accent transition-all",children:[e.jsx("div",{className:"text-4xl font-black text-primary-black mb-2",children:"$0"}),e.jsx("div",{className:"text-sm text-gray-muted font-black uppercase tracking-widest px-3 py-1 bg-cream-accent inline-block rounded-full",children:r("Earnings")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(i,{href:route("onboarding.index"),className:"block group cursor-pointer",children:e.jsx(w,{title:r("Update Expertise"),subtitle:r("Showcase your skills"),icon:e.jsx(B,{})})}),e.jsx(w,{title:r("Manage Schedule"),subtitle:r("View and edit bookings"),icon:e.jsx(_,{})}),e.jsx(w,{title:r("Payment Settings"),subtitle:r("Setup your payouts"),icon:e.jsx(R,{})})]})]})}function W({user:a,t:r}){return e.jsxs("div",{className:"space-y-10",children:[e.jsx("div",{className:"bg-gradient-to-br from-cream-accent to-white border border-gold-accent/20 rounded-[32px] p-8 lg:p-12 relative overflow-hidden group",children:e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:items-center justify-between gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-3xl lg:text-4xl font-black text-primary-black mb-4 leading-tight",children:[r("Hi")," ",a.name.split(" ")[0],", ",r("Dual Power!")," üöÄ"]}),e.jsx("p",{className:"text-gray-muted text-lg font-bold",children:r("Manage your tasks and bookings all in one place. You're set for both worlds.")})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(i,{href:route("missions.search"),className:"bg-primary-black text-white font-black py-3 px-6 rounded-full hover:opacity-90 transition-all text-sm shadow-md",children:r("Post Task")}),e.jsx("button",{className:"bg-gold-accent text-primary-black font-black py-3 px-8 rounded-full hover:opacity-90 transition-all text-sm shadow-md",children:r("Available Tasks")})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-8",children:[e.jsxs("h4",{className:"text-xl font-black text-primary-black mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-cream-accent flex items-center justify-center transition-colors group-hover:bg-gold-accent",children:e.jsx("svg",{className:"w-4 h-4 text-gold-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),r("As a Customer")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("Find Performers")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]}),e.jsxs("div",{className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("Manage My Tasks")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-8",children:[e.jsxs("h4",{className:"text-xl font-black text-primary-black mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-cream-accent flex items-center justify-center transition-colors group-hover:bg-gold-accent",children:e.jsx("svg",{className:"w-4 h-4 text-gold-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),r("As a Performer")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(i,{href:route("missions.active"),className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("Available Tasks")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]}),e.jsxs("div",{className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("My Earning Overview")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]}),e.jsxs(i,{href:route("onboarding.index"),className:"p-4 bg-oflem-cream rounded-[20px] font-black text-sm text-primary-black flex justify-between items-center hover:bg-cream-accent cursor-pointer transition-colors border border-transparent hover:border-gold-accent/20",children:[e.jsx("span",{children:r("Update My Expertise")}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]})]})]})]})]})}function E({user:a,t:r}){return e.jsxs("div",{className:"bg-white border border-gray-border rounded-[32px] p-12 text-center max-w-2xl mx-auto mt-20 shadow-sm transition-all hover:shadow-md",children:[e.jsx("h3",{className:"text-3xl font-black text-primary-black mb-4",children:r("Welcome to Oflem!")}),e.jsxs("p",{className:"text-gray-muted text-lg font-bold mb-8",children:[r("You're logged in as")," ",a.name,". ",r("Your account setup is complete.")]}),e.jsx(i,{href:"/",className:"bg-gold-accent text-primary-black font-black py-3 px-8 rounded-full hover:opacity-90 inline-block shadow-md",children:r("Get Started")})]})}function w({title:a,subtitle:r,icon:t}){return e.jsxs("div",{className:"bg-white border border-gray-border rounded-[24px] p-10 hover:shadow-xl hover:border-gold-accent transition-all group cursor-pointer",children:[e.jsx("div",{className:"w-14 h-14 bg-cream-accent rounded-full flex items-center justify-center mb-6 text-gold-accent group-hover:bg-gold-accent group-hover:text-primary-black transition-colors shadow-sm",children:t}),e.jsx("h5",{className:"text-lg font-black text-primary-black mb-1",children:a}),e.jsx("p",{className:"text-sm text-gray-muted font-bold",children:r})]})}function B(){return e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}function _(){return e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}function R(){return e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}export{H as default};
