import{a as p,u as w,j as e,H as N,c as _}from"./app-VuuoFMYi.js";import{A as S}from"./AuthenticatedLayout-CBkajSYM.js";import{u as z}from"./useTranslation-DhCHActQ.js";import{I as i}from"./InputLabel-BMc0Cw46.js";import{I as c}from"./InputError-DaLsWigP.js";import"./Header-3kHNh44_.js";import"./transition-DXqgghb9.js";import"./Footer-BksMcUE0.js";function T({existingProfile:l=null}){const{t:r}=z(),[n,x]=p.useState(l?2:1),[u,b]=p.useState(!1),[g,d]=p.useState(""),{data:t,setData:o,post:f,processing:y,errors:m}=w({description:"",bio:l?.bio||"",years_experience:l?.years_experience||0,main_category:l?.main_category||"",skills:l?.skills?.map(a=>({name:a.name,proficiency:a.pivot?.proficiency_level||"intermediate"}))||[],raw_analysis:l?.raw_ai_analysis||null}),h=async()=>{if(!t.description||t.description.length<20){d(r("Please provide more details (min 20 chars)."));return}b(!0),d("");try{const s=(await _.post(route("onboarding.analyze"),{description:t.description})).data;o(k=>({...k,bio:s.professional_bio||"",years_experience:s.years_experience||0,main_category:s.main_category||"General",skills:s.skills||[],raw_analysis:s})),x(2)}catch(a){d(r("Failed to analyze. Please try again or fill manually.")),console.error(a)}finally{b(!1)}},j=a=>{a.preventDefault(),f(route("onboarding.store"))},v=a=>{const s=[...t.skills];s.splice(a,1),o("skills",s)};return e.jsxs(S,{header:r(l?"Edit Provider Profile":"Provider Onboarding"),maxWidth:"max-w-3xl",showFooter:!0,children:[e.jsx(N,{title:r("Provider Onboarding")}),e.jsx("div",{className:"py-16",children:e.jsxs("div",{className:"bg-white rounded-[40px] p-8 md:p-12 shadow-sm border border-gray-border",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h2",{className:"text-3xl font-black text-primary-black mb-3",children:r(n===1?"Tell us about your expertise":"Review your profile")}),e.jsx("p",{className:"text-gray-muted font-bold",children:r(n===1?"Our AI will analyze your skills to match you with the right missions.":"We extracted this from your description. Does it look correct?")})]}),n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"description",value:r("Describe your services & experience"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("textarea",{id:"description",value:t.description,onChange:a=>o("description",a.target.value),className:"w-full bg-oflem-cream border-gray-border rounded-[24px] p-5 text-sm font-medium focus:border-gold-accent focus:ring-0 min-h-[200px] transition-all",placeholder:r("Example: I have been a carpenter for 10 years, specializing in custom furniture and repairs. I also have experience with painting and drywall...")}),e.jsx(c,{message:g,className:"mt-2"})]}),e.jsx("button",{onClick:h,disabled:u,className:"w-full py-5 bg-gold-accent text-primary-black font-black rounded-full hover:opacity-90 transition-all shadow-md text-lg flex items-center justify-center gap-3",children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-6 h-6 border-4 border-primary-black border-t-transparent rounded-full animate-spin"}),r("Analyzing...")]}):e.jsxs(e.Fragment,{children:["✨ ",r("Analyze Profile")]})})]}),n===2&&e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"bio",value:r("Professional Bio"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("textarea",{id:"bio",value:t.bio,onChange:a=>o("bio",a.target.value),className:"w-full bg-oflem-cream border-gray-border rounded-[24px] p-5 text-sm font-medium focus:border-gold-accent focus:ring-0 min-h-[100px]"}),e.jsx(c,{message:m.bio,className:"mt-2"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"years",value:r("Years of Experience"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("input",{type:"number",id:"years",value:t.years_experience,onChange:a=>o("years_experience",a.target.value),className:"w-full bg-oflem-cream border-gray-border rounded-full px-6 py-4 text-sm font-bold focus:border-gold-accent focus:ring-0"}),e.jsx(c,{message:m.years_experience,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"category",value:r("Main Category"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsx("input",{type:"text",id:"category",value:t.main_category,onChange:a=>o("main_category",a.target.value),className:"w-full bg-oflem-cream border-gray-border rounded-full px-6 py-4 text-sm font-bold focus:border-gold-accent focus:ring-0"}),e.jsx(c,{message:m.main_category,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(i,{value:r("Extracted Skills"),className:"text-xs uppercase tracking-widest font-black mb-3"}),e.jsxs("div",{className:"bg-oflem-cream rounded-[24px] p-6 border border-gray-border min-h-[100px] flex flex-wrap gap-3",children:[t.skills.map((a,s)=>e.jsxs("div",{className:"bg-white border border-gray-border px-4 py-2 rounded-full flex items-center gap-2 shadow-sm",children:[e.jsx("span",{className:"font-bold text-sm text-primary-black",children:a.name}),e.jsx("span",{className:`text-[10px] uppercase font-black px-2 py-0.5 rounded-full ${a.proficiency==="expert"?"bg-gold-accent text-primary-black":a.proficiency==="beginner"?"bg-gray-200 text-gray-500":"bg-blue-100 text-blue-600"}`,children:a.proficiency}),e.jsx("button",{type:"button",onClick:()=>v(s),className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center hover:bg-red-500 hover:text-white transition-colors",children:"×"})]},s)),t.skills.length===0&&e.jsx("p",{className:"text-gray-muted text-sm italic",children:r("No skills detected. Try adding more detail to your description.")})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>x(1),className:"flex-1 py-4 bg-white border-2 border-gray-border text-primary-black font-black rounded-full hover:bg-oflem-cream transition-all",children:r("Back")}),e.jsx("button",{type:"submit",disabled:y,className:"flex-1 py-4 bg-primary-black text-white font-black rounded-full hover:bg-black transition-all shadow-xl",children:r(y?"Saving...":"Complete Profile")})]})]})]})})]})}export{T as default};
