import{a as f,j as e,H as k,L as y}from"./app-BzT1XJs-.js";import{A as w}from"./AuthenticatedLayout-nSBAhMTT.js";import{u as C}from"./useTranslation-CkkQP2aV.js";import{m as i,i as A}from"./Header-CIxGRA4Z.js";import{c as g}from"./createLucideIcon-9JG15j3W.js";import{D as H,c as T,R as M,B as z,C as E,X as S,Y as L,T as R,a as u}from"./BarChart-5hslGkEu.js";import{F as P}from"./file-text-CaES3akB.js";import{B as Y}from"./banknote-CiPUG8d2.js";import{T as B}from"./trending-up-DPip2IeB.js";import{C as O}from"./calendar-CPnV1uk0.js";import{I as _}from"./info-Bw6ke7Xi.js";import"./Footer-_ibdc-Gi.js";import"./transition-DRgArclq.js";import"./circle-user-Cs22UjIs.js";import"./with-selector-CPl_1288.js";const $=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],D=g("chevron-left",$);const I=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],W=g("chevron-up",I),r={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.45,ease:[.22,1,.36,1]}}};function n(l,c=2){return parseFloat(l||0).toLocaleString(void 0,{minimumFractionDigits:c,maximumFractionDigits:c})}const j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function G(l){return[...l].sort((c,d)=>j.indexOf(c.month)-j.indexOf(d.month))}function re({taxData:l,providerName:c,year:d}){const{t}=C(),[h,p]=f.useState(l[0]?.year??d),[x,N]=f.useState(null),a=l.find(s=>s.year===h),b=a?G(a.months):[],v=()=>window.print();return e.jsxs(w,{header:t("Tax Report"),maxWidth:"max-w-5xl",showFooter:!0,children:[e.jsx(k,{title:t("Tax & Earnings Report")}),e.jsxs(i.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.07}}},className:"py-6 px-2 sm:px-0 space-y-8",children:[e.jsxs(i.div,{variants:r,className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(y,{href:route("wallet.index"),className:"inline-flex items-center gap-1.5 text-slate-400 text-xs font-bold hover:text-[#FF7F00] transition-colors mb-3",children:[e.jsx(D,{size:14}),t("Back to Wallet")]}),e.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-[#FF7F00] mb-1",children:t("Provider Earnings")}),e.jsx("h1",{className:"text-3xl font-black text-[#0F172A] tracking-tight",children:t("Annual Tax Report")}),e.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:c})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex gap-2",children:l.map(s=>e.jsx("button",{onClick:()=>p(s.year),className:`px-4 py-2 rounded-xl text-sm font-black transition-all ${h===s.year?"bg-[#0F172A] text-white shadow-md":"bg-white border border-slate-200 text-slate-500 hover:border-slate-300"}`,children:s.year},s.year))}),e.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 font-bold text-sm rounded-xl hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm print:hidden",children:[e.jsx(H,{size:15}),t("Print / Save PDF")]})]})]}),l.length===0?e.jsxs(i.div,{variants:r,className:"bg-white rounded-2xl border border-slate-100 p-16 text-center",children:[e.jsx("div",{className:"w-14 h-14 bg-slate-50 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(P,{size:24,className:"text-slate-300"})}),e.jsx("p",{className:"font-black text-[#0F172A] text-lg",children:t("No earnings data yet")}),e.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:t("Complete missions to see your annual tax summary here.")})]}):a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:t("Gross Earnings"),value:`CHF ${n(a.total+a.commission)}`,accent:"text-[#0F172A]",icon:Y},{label:t("Net to You"),value:`CHF ${n(a.total)}`,accent:"text-emerald-600",icon:B},{label:t("Platform Fees"),value:`CHF ${n(a.commission)}`,accent:"text-orange-500",icon:T},{label:t("Missions"),value:a.count,accent:"text-[#0F172A]",icon:O}].map(({label:s,value:o,accent:m,icon:F})=>e.jsxs(i.div,{variants:r,className:"bg-white rounded-2xl border border-slate-100 p-5 shadow-sm",children:[e.jsx("div",{className:"w-9 h-9 bg-slate-50 rounded-lg flex items-center justify-center mb-3",children:e.jsx(F,{size:16,className:"text-slate-400"})}),e.jsx("p",{className:`text-xl font-black ${m}`,children:o}),e.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mt-1",children:s})]},s))}),e.jsxs(i.div,{variants:r,className:"flex items-start gap-3 bg-blue-50 border border-blue-100 rounded-2xl p-5",children:[e.jsx(_,{size:16,className:"text-blue-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-blue-700 text-sm mb-0.5",children:t("Swiss Freelance Tax Guidance")}),e.jsxs("p",{className:"text-blue-600 text-xs font-medium leading-relaxed",children:[t("In Switzerland, freelance income (Selbstständigkeit) must be declared in your cantonal tax return. Platform fees (CHF")," ",n(a.commission)," ",t(") paid to Oflem are deductible as business expenses. Consult a Treuhänder (fiduciary) for personalised advice.")]})]})]}),e.jsxs(i.div,{variants:r,className:"bg-white rounded-2xl border border-slate-100 p-6 shadow-sm",children:[e.jsxs("h2",{className:"text-base font-black text-[#0F172A] mb-5",children:[t("Monthly Earnings Breakdown")," — ",a.year]}),e.jsx(M,{width:"100%",height:240,children:e.jsxs(z,{data:b,margin:{top:0,right:0,left:-20,bottom:0},children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(S,{dataKey:"month",tick:{fontSize:11,fontWeight:700,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),e.jsx(L,{tick:{fontSize:11,fontWeight:700,fill:"#94a3b8"},axisLine:!1,tickLine:!1,tickFormatter:s=>`${s}`}),e.jsx(R,{content:({active:s,payload:o,label:m})=>!s||!o?.length?null:e.jsxs("div",{className:"bg-[#0F172A] text-white px-4 py-3 rounded-xl shadow-2xl text-sm",children:[e.jsxs("p",{className:"font-black mb-1",children:[m," ",a.year]}),e.jsxs("p",{className:"text-emerald-400 font-bold",children:["Net: CHF ",n(o[0]?.value)]}),o[1]&&e.jsxs("p",{className:"text-orange-400 font-bold",children:["Fee: CHF ",n(o[1]?.value)]}),e.jsxs("p",{className:"text-white/50 text-xs mt-1",children:[o[0]?.payload?.count??0," missions"]})]})}),e.jsx(u,{dataKey:"total",name:"Net",fill:"#10b981",radius:[4,4,0,0]}),e.jsx(u,{dataKey:"commission",name:"Fee",fill:"#FF7F00",radius:[4,4,0,0]})]})}),e.jsxs("div",{className:"flex gap-5 justify-center mt-3",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500",children:[e.jsx("span",{className:"w-3 h-3 rounded-sm bg-emerald-500 inline-block"})," ",t("Net Earnings")]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500",children:[e.jsx("span",{className:"w-3 h-3 rounded-sm bg-[#FF7F00] inline-block"})," ",t("Platform Fee")]})]})]}),e.jsxs(i.div,{variants:r,className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-slate-50",children:e.jsx("h2",{className:"text-base font-black text-[#0F172A]",children:t("Month-by-Month Detail")})}),e.jsxs("div",{className:"divide-y divide-slate-50",children:[e.jsx("div",{className:"grid grid-cols-4 px-6 py-3 bg-slate-50",children:[t("Month"),t("Missions"),t("Platform Fee"),t("Net Earnings")].map(s=>e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:s},s))}),b.map(s=>e.jsxs("div",{className:"grid grid-cols-4 px-6 py-4 hover:bg-slate-50/50 transition-colors",children:[e.jsxs("span",{className:"font-black text-[#0F172A] text-sm",children:[s.month," ",a.year]}),e.jsx("span",{className:"text-slate-500 font-medium text-sm",children:s.count}),e.jsxs("span",{className:"text-orange-500 font-bold text-sm",children:["CHF ",n(s.commission)]}),e.jsxs("span",{className:"text-emerald-600 font-black text-sm",children:["CHF ",n(s.total)]})]},s.month)),e.jsxs("div",{className:"grid grid-cols-4 px-6 py-4 bg-slate-50 border-t border-slate-100",children:[e.jsxs("span",{className:"font-black text-[#0F172A] text-sm",children:[t("Total")," ",a.year]}),e.jsx("span",{className:"font-black text-[#0F172A] text-sm",children:a.count}),e.jsxs("span",{className:"text-orange-500 font-black text-sm",children:["CHF ",n(a.commission)]}),e.jsxs("span",{className:"text-emerald-600 font-black text-sm",children:["CHF ",n(a.total)]})]})]})]}),l.length>1&&e.jsxs(i.div,{variants:r,className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[e.jsxs("button",{onClick:()=>N(x?null:"all"),className:"w-full flex items-center justify-between px-6 py-4 hover:bg-slate-50 transition-colors",children:[e.jsx("h2",{className:"text-base font-black text-[#0F172A]",children:t("All Years Overview")}),x?e.jsx(W,{size:16,className:"text-slate-400"}):e.jsx(A,{size:16,className:"text-slate-400"})]}),x&&e.jsxs("div",{className:"divide-y divide-slate-50",children:[e.jsx("div",{className:"grid grid-cols-4 px-6 py-3 bg-slate-50",children:[t("Year"),t("Missions"),t("Platform Fee"),t("Net Earnings")].map(s=>e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:s},s))}),l.map(s=>e.jsxs("div",{className:"grid grid-cols-4 px-6 py-4",children:[e.jsx("button",{onClick:()=>p(s.year),className:"font-black text-[#FF7F00] text-sm hover:underline text-left",children:s.year}),e.jsx("span",{className:"text-slate-500 font-medium text-sm",children:s.count}),e.jsxs("span",{className:"text-orange-500 font-bold text-sm",children:["CHF ",n(s.commission)]}),e.jsxs("span",{className:"text-emerald-600 font-black text-sm",children:["CHF ",n(s.total)]})]},s.year))]})]})]}):e.jsx(i.div,{variants:r,className:"text-center py-16 text-slate-400",children:t("No data for selected year.")})]})]})}export{re as default};
