graph TD
    %% --- CONFIGURATION ---
    %% Minimalist Professional Style with Explicit Role Headers

    %% --- CLIENT SWIMLANE ---
    subgraph Client_Flow["CLIENT ROLE (Mission Owner)"]
        direction TB
        %% Explicit Role Header Node
        C_Role[<B>ROLE: CLIENT</B>]:::roleHeader
        
        C_Start([Start]) --> C_Register[Sign Up / Login]
        C_Register --> C_Post[Post a Mission]
        C_Post --> C_Wait[Wait for Offers]
        C_Wait --> C_Review[Review Profiles & Offers]
        C_Review --> C_Chat[Chat & Negotiate]
        C_Chat --> C_Select{Select Performer?}
        
        C_Select -- Yes --> C_Pay[Secure Payment / Escrow]
        C_Select -- No --> C_Wait
        
        C_Pay --> C_Monitor[Wait for Work Completion]
        C_Monitor --> C_Validate{Job Done Correctly?}
        
        C_Validate -- Yes --> C_Rate[Approve & Rate]
        C_Validate -- Issue --> C_Dispute[Open Dispute]
        
        C_Rate --> C_End([End])
        
        %% Link Header to Start
        C_Role --- C_Start
    end

    %% --- SYSTEM SWIMLANE ---
    subgraph System_Logic["SYSTEM ROLE (Automation)"]
        direction TB
        %% Explicit Role Header Node
        S_Role[<B>ROLE: SYSTEM</B>]:::roleHeader

        S_Auth[Verify Identity]
        S_Mod[AI Content Moderation]
        S_Match[Matchmaking Engine]
        S_Escrow[Hold Funds in Escrow]
        S_Reveal[Reveal Address to Performer]
        S_Release[Release Funds to Wallet]
        S_Dispute[Admin Dispute Resolution]
        
        %% Link Header to First Action
        S_Role --- S_Auth

        %% Connections
        C_Register -.-> S_Auth
        C_Post -.-> S_Mod
        S_Mod -->|Approved| S_Match
        C_Pay -.-> S_Escrow
        S_Escrow --> S_Reveal
        C_Validate -.->|Unlocks| S_Release
        C_Dispute -.-> S_Dispute
    end

    %% --- PERFORMER SWIMLANE ---
    subgraph Performer_Flow["PERFORMER ROLE (Helper)"]
        direction TB
        %% Explicit Role Header Node
        P_Role[<B>ROLE: PERFORMER</B>]:::roleHeader

        P_Start([Start]) --> P_Register[Register & AI Skills Check]
        P_Register --> P_Browse[Browse & Alerts]
        S_Match -.-> P_Browse
        P_Browse --> P_Offer[Submit Offer]
        P_Offer --> P_Neg[Discuss Details]
        P_Neg --> P_Wait_Select[Wait for Selection]
        
        S_Reveal -.->|Address Unlocked| P_StartJob[Start Job / Go to Location]
        P_StartJob --> P_DoWork[Perform the Task]
        P_DoWork --> P_Finish[Finish & Upload Proof]
        
        P_Finish --> P_Wait_Val[Wait for Approval] 
        S_Release -.->|Funds Available| P_Withdraw[Withdraw Earnings]
        
        P_Withdraw --> P_End([Done])

        %% Link Header to Start
        P_Role --- P_Start
    end

    %% --- INTER-LANE CONNECTIONS ---
    C_Chat <--> P_Neg
    C_Pay --> P_Wait_Select
    P_Finish --> C_Monitor

    %% --- STYLING ---
    classDef default fill:#fff,stroke:#333,stroke-width:1px,color:#000;
    classDef roleHeader fill:#eee,stroke:#000,stroke-width:2px,color:#000;
    classDef startend fill:#000,stroke:#000,stroke-width:1px,color:#fff;
    
    class C_Start,C_End,P_Start,P_End startend;

    style Client_Flow fill:none,stroke:#000,stroke-width:2px,stroke-dasharray: 0 0
    style System_Logic fill:none,stroke:#666,stroke-width:2px,stroke-dasharray: 5 5
    style Performer_Flow fill:none,stroke:#000,stroke-width:2px,stroke-dasharray: 0 0
